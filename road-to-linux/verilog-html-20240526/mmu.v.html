<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<title>../src/mmu.v</title>
<link rel="Stylesheet" title="v2html stylesheet" media="Screen" href="v2html.css">
</head>
<script language="JavaScript" type="text/javascript"><!--
var agt=navigator.userAgent.toLowerCase(); 
var is_nav  = ((agt.indexOf('mozilla')!=-1) &&
(agt.indexOf('spoofer')==-1) &&
(agt.indexOf('compatible') == -1) &&
(agt.indexOf('opera')==-1) &&
(agt.indexOf('webtv')==-1)); 
var is_major = parseInt(navigator.appVersion); 
var is_nav4up = (is_nav && (is_major >= 4)); 
var is_ie     = (agt.indexOf("msie") != -1); 
var is_ie4up  = (is_ie  && (is_major >= 4)); 
var is_nav5up = (is_nav && (is_major >= 5));
var dirSep = (window.location.pathname.indexOf('\\') != -1) ? '\\' : '/' ;
function setbuttons (wndw) {
var i;
var sl=wndw.loc[ wndw.document.forms[0].elements[0].selectedIndex ];
for (i=0;i<sl.length;i++) {
if(sl[i]) wndw.document.images[i].src='v2html-b1.gif';
else      wndw.document.images[i].src='v2html-b2.gif';
}
if ( wndw.document.forms[0].elements[0].options[ 
wndw.document.forms[0].elements[0].selectedIndex ].text != '-') {
wndw.document.images[i  ].src='v2html-b1.gif';
wndw.document.images[i+1].src='v2html-b1.gif';
}
else {
wndw.document.images[i  ].src='v2html-b2.gif';
wndw.document.images[i+1].src='v2html-b2.gif';
}
}
// Unindented and uncommented to save spave - look in v2html for a prettier version
var disabled=1;
if (!is_nav4up) {
var event=false; 
}
var last_link=0;     
var last_class=null; 
function qs(e,t,extra_info_index) {
var inc=0,bnum=0,i,j;
if (disabled) return false;
var sig_buttons = [ "Definition" , "Local Driver" , 
"Up to Input Driver" , "Find Source" , "Index"];
if (is_nav4up || is_ie4up) {
if (((e.which==2) && (!(e.modifiers&Event.SHIFT_MASK))) ||
((e.which==1) &&  (e.modifiers&Event.CONTROL_MASK)))   inc = 1;
else if (((e.which==2) && (e.modifiers&Event.SHIFT_MASK)) ||
((e.which==1) && (e.modifiers&Event.SHIFT_MASK))) inc = -1;
if (inc == 0 && extra_info_index == 0) { 
return true;  
}
var linkText = is_nav4up ? t.text : t.innerText;
var linkY    = is_nav4up && ! is_nav5up ? t.y    : t.offsetTop;
window.status="Searching...";
if ((last_link==-1) || (document.links[last_link]!=t)) 
for (last_link=0;last_link<document.links.length;last_link++) 
if (document.links[last_link] == t)  
break;
if (inc != 0) { 
return search(linkText,linkY,last_link,inc,1);
}
else { 
window.status="";
extra_info_index--; 
if (extra_info[extra_info_index][0] != 'S') { 
return true;
}
var w = window.open('','SignalPopUp','width=200,height=235');
if (null != w.document.forms[0]) {
if ((window.location.pathname.substring(0,window.location.pathname.lastIndexOf(dirSep)))!=
(w.pn.substring(0,w.pn.lastIndexOf(dirSep)))) {
w.close();
w = window.open('','SignalPopUp','width=200,height=235');
}
}
w.focus(); 
if (null == w.document.forms[0]) { 
var Text = '<html><head></head>';
if (is_nav4up) { 
w.loc = new Array(10);
w.sel = null;
w.pn  = window.location.pathname;
}
else {     
Text += '<script>var loc = new Array(10);<\/script>\n';
Text += '<script>var sel;<\/script>\n';
Text += '<script>var pn = opener.location.pathname;<\/script>\n';
}
Text += '<body bgcolor="white">\n';
Text += '<form>';
Text += '  <select onchange="opener.setbuttons(window);">\n';
Text += '  <option>---------------------------</option>\n';
for (j=0;j<9;j++) Text += '  <option>-</option>\n';
Text += '  </select>\n';
Text += '</form>';
Text += '<table cellspacing=0 cellpadding=0>\n';
for (var i=0;i<(extra_info[extra_info_index].length-1);i++) {
Text += hbutton(sig_buttons[i], 
'opener.location=loc[sel.selectedIndex]['+i+'];',
bnum++);
}
Text += hbutton("Search Backwards", 
'opener.search(sel.options[ sel.selectedIndex ].text,' +
'0,opener.last_link,-1,0);',bnum++);
Text += hbutton("Search Forwards",
'opener.search(sel.options[ sel.selectedIndex ].text,' +
'0,opener.last_link, 1,0);',bnum++);
Text += hbutton("Close","window.close();",bnum++);
Text += '</table>\n';
Text += '</body></html>\n';
w.document.open();
w.document.write(Text);
w.document.close();
w.document.forms[0].elements[0].options[0].text  = linkText;
w.sel = w.document.forms[0].elements[0]; 
for (j=0;j<10;j++) w.loc[j] = new Array(sig_buttons.length);  
copy_into_loc0(w,extra_info_index);
}
else {
var opts = w.document.forms[0].elements[0].options;
if ( opts.length<10 ) { 
w.loc[opts.length] = new Array;
opts.length++; 
}
for (i=opts.length-2;i>=0;i--) {
opts[i+1].text=opts[i].text;
for (var j=0;j<w.loc[i].length;j++) w.loc[i+1][j] = w.loc[i][j];
}
opts[0].text  = linkText;
copy_into_loc0(w,extra_info_index);
}
return false; 
}
}
return true;
}
function hbutton (text,action,bnum) {
return '  <tr><td><a href="" '+
'onmousedown="'+
'if (images['+bnum+'].src.match(/v2html-b2.gif/)) return false; ' +
'images['+bnum+'].src=\'v2html-b3.gif\';" '+
'onmouseup="'+
'if (images['+bnum+'].src.match(/v2html-b2.gif/)) return false; ' +
'images['+bnum+'].src=\'v2html-b1.gif\';" '+
'onclick="'+
'if (images['+bnum+'].src.match(/v2html-b2.gif/)) return false; ' +
action + 
' return false;">'+
'<img border=0 src="v2html-b1.gif"></a></td>' +
'<td style="font-family:sans-serif; font-weight:bold; font-size:14px;"> '+text+'</td></tr>\n';
}
function copy_into_loc0 (w,extra_info_index) {
for (var i=1;i<extra_info[extra_info_index].length;i++) {
w.loc[0][i-1] = extra_info[extra_info_index][i];
}
w.document.forms[0].elements[0].selectedIndex=1;
w.document.forms[0].elements[0].selectedIndex=0;
setbuttons(w);
}
function search(text,y,i,inc,relative) {
var nextpage,wrappage,linkText,linkY;
window.status="Searching...";
if (last_class) document.links[i].className=last_class;
while (1) {
for (i+=inc;i<document.links.length && i>=0;i+=inc) {
linkText = is_nav4up ? document.links[i].text : document.links[i].innerText;
linkY    = is_nav4up && ! is_nav5up ? document.links[i].y    : document.links[i].offsetTop;
if ((linkText == text) && (linkY != y)) {
window.status="";
if (is_nav4up) 
if (relative) window.scrollBy(0,linkY - y);
else          window.scrollTo(0,linkY); 
else if (is_ie4up)
document.links[i].scrollIntoView(true); 
last_link=i;
last_class=document.links[i].className;
document.links[i].className='HI';
return false;
}
}
nextpage = (inc==1) ? next_page() : prev_page();
wrappage = (inc==1) ? first_page() : last_page();
if (nextpage!="" || wrappage!="") {
if (nextpage=="") { 
if (!confirm(text + " not found. Search again from "+((inc==1)?"first":"last")+" page?"))
return false;
nextpage=wrappage;
}
location=nextpage+ "?" + escape(text) + "&" + ( y - window.pageYOffset ) + "&" + inc;
return false;
}
if (confirm(text + " not found. Search again from "+((inc==1)?"start":"end")+"?")) {
if (inc==1) i=-1;
else i=document.links.length;
} else return false;
}
return true;
}
function loadqs() {
var opt=location.search, text="", s="", y=0, si=0, inc=1;
if (opt.length==0) return true;  
for (var i=1;i<opt.length;i++) { 
if (opt.charAt(i) != "&") 
s += opt.charAt(i);
else {
if (text=="") text=unescape(s);
else             y=s;
s="";
}
}
if (text=="") return true;
if (s == "-1") { si=document.links.length-1; inc=-1; }
window.scrollTo(0,0);
search(text,y,si,inc);
return true;
}
// -->
</script>
<body onload='loadqs();'>
<script language="JavaScript"type="text/javascript"><!--
function prev_page() { return ""; }
function last_page() { return ""; }
// -->
</script>
<center><table class=NB cols=7 ><tr><td align="center" width="14%" onmousedown="this.style.border='inset';" onmouseup="this.style.border='outset';"  onclick="location='hierarchy.html';"><a target="_top" href="hierarchy.html">Hierarchy</a></td><td align="center" width="14%" onmousedown="this.style.border='inset';" onmouseup="this.style.border='outset';"  onclick="location='hierarchy-f.html';"><a target="_top" href="hierarchy-f.html">Files</a></td><td align="center" width="14%" onmousedown="this.style.border='inset';" onmouseup="this.style.border='outset';"  onclick="location='hierarchy-m.html';"><a target="_top" href="hierarchy-m.html">Modules</a></td><td align="center" width="14%" onmousedown="this.style.border='inset';" onmouseup="this.style.border='outset';"  onclick="location='hierarchy-s.html';"><a target="_top" href="hierarchy-s.html">Signals</a></td><td align="center" width="14%" onmousedown="this.style.border='inset';" onmouseup="this.style.border='outset';"  onclick="location='hierarchy-t.html';"><a target="_top" href="hierarchy-t.html">Tasks</a></td><td align="center" width="14%" onmousedown="this.style.border='inset';" onmouseup="this.style.border='outset';"  onclick="location='hierarchy-fn.html';"><a target="_top" href="hierarchy-fn.html">Functions</a></td><td align="center" width="14%" onmousedown="this.style.border='inset';" onmouseup="this.style.border='outset';"  onclick="location='http://www.burbleland.com/v2html/help_7_30.html?';"><a target="_top" href="http://www.burbleland.com/v2html/help_7_30.html?">Help</a></td></tr></table></center>
<pre>
<span class=C>// modified: Laurentiu-Cristian Duca, date: 20240322
</span><span class=C>// spdx license identifier MIT
</span>
<span class=C>/**************************************************************************************************/</span>
<span class=C>/**** RVSoC (Mini Kuroda/RISC-V)                       since 2018-08-07   ArchLab. TokyoTech   ****/</span>
<span class=C>/**** Memory Controller v0.01                                                                  ****/</span>
<span class=C>/**************************************************************************************************/</span>
<span class=M>`default_nettype</span> none
<span class=C>/**************************************************************************************************/</span>
<span class=M>`include</span> <a  onClick="return qs(event,this,0)"  class=S href="define.vh.html">&quot;define.vh&quot;</a>

<span class=C>/**************************************************************************************************/</span>
<a name="m_mmu"></a><a  href="cpummu.v.html#m_cpummu_mmu"><img alt="[Up: m_cpummu mmu]" align=bottom border=0 src="v2html-up.gif"></a><a  href="main.v.html#m_main_c"><img alt="[Up: m_main c]" align=bottom border=0 src="v2html-up.gif"></a>
<span class=K>module</span> <span class=MM>m_mmu</span><a  href="hierarchy-m.html#m_mmu"><img align=top border=0 alt="Index" src="v2html-i.gif"></a>(
<a name="14"></a>    <span class=K>input</span>  <span class=K>wire</span>         <a  onClick="return qs(event,this,1)"  class=SI href="cpummu.v.html#69">CLK</a>, <a  onClick="return qs(event,this,2)"  class=SI href="cpummu.v.html#70">RST_X</a>,
<a name="15"></a>    <span class=K>input</span> <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,3)"  class=SI href="cpummu.v.html#71">w_hart_id</a>,
<a name="16"></a>    <span class=K>input</span> <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,4)"  class=SI href="cpummu.v.html#72">w_grant</a>,
<a name="17"></a>    <span class=K>input</span> <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,5)"  class=SI href="cpummu.v.html#73">w_pc</a>,
<a name="18"></a>    <span class=K>input</span> <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,6)"  class=SI href="cpummu.v.html#74">w_ir</a>,
<a name="19"></a>    <span class=K>input</span> <span class=K>wire</span> <a  onClick="return qs(event,this,7)"  class=SI href="cpummu.v.html#76">w_tx_ready</a>,
<a name="20"></a>    <span class=K>input</span>  <span class=K>wire</span> [31:0]  <a  onClick="return qs(event,this,8)"  class=SI href="cpummu.v.html#78">w_insn_addr</a>,
<a name="21"></a>    <span class=K>input</span>  <span class=K>wire</span> [31:0]  <a  onClick="return qs(event,this,9)"  class=SI href="cpummu.v.html#79">w_data_addr</a>,
<a name="22"></a>    <span class=K>input</span>  <span class=K>wire</span> [31:0]  <a  onClick="return qs(event,this,10)"  class=SI href="cpummu.v.html#80">w_data_wdata</a>,
<a name="23"></a>    <span class=K>input</span>  <span class=K>wire</span>         <a  onClick="return qs(event,this,11)"  class=SI href="cpummu.v.html#81">w_proc_data_we</a>,
<a name="24"></a>    <span class=K>output</span>  <span class=K>wire</span>         <a  onClick="return qs(event,this,12)"  class=SO href="#345">w_data_we</a>,
<a name="25"></a>    <span class=K>output</span> <span class=K>wire</span>         <a  onClick="return qs(event,this,13)"  class=SO href="#344">w_data_le</a>,
<a name="26"></a>    <span class=K>input</span> <span class=K>wire</span>  [3:0]   <a  onClick="return qs(event,this,14)"  class=SI href="cpummu.v.html#84">w_data_busy</a>,
<a name="27"></a>    <span class=K>input</span>  <span class=K>wire</span>  [2:0]  <a  onClick="return qs(event,this,15)"  class=SI href="cpummu.v.html#85">w_data_ctrl</a>,
<a name="28"></a>    <span class=K>output</span> <span class=K>wire</span> [31:0]  <a  onClick="return qs(event,this,16)"  class=SO href="#331">w_insn_data</a>,
<a name="29"></a>    <span class=K>input</span>  <span class=K>wire</span> [31:0]  <a  onClick="return qs(event,this,17)"  class=SI href="cpummu.v.html#87">w_priv</a>, <a  onClick="return qs(event,this,18)"  class=SI href="cpummu.v.html#88">w_satp</a>, <a  onClick="return qs(event,this,19)"  class=SI href="cpummu.v.html#89">w_mstatus</a>,
<a name="30"></a>    <span class=K>output</span> <span class=K>wire</span> [31:0]  <a  onClick="return qs(event,this,20)"  class=SO href="#136">w_pagefault</a>,
<a name="31"></a>    <span class=K>input</span>  <span class=K>wire</span>  [1:0]  <a  onClick="return qs(event,this,21)"  class=SI href="cpummu.v.html#91">w_tlb_req</a>,
<a name="32"></a>    <span class=K>input</span>  <span class=K>wire</span>         <a  onClick="return qs(event,this,22)"  class=SI href="cpummu.v.html#92">w_tlb_flush</a>,
<a name="33"></a>    <span class=K>output</span> <span class=K>wire</span>         <a  onClick="return qs(event,this,23)"  class=SO href="#355">w_proc_busy</a>,

<a name="35"></a>    <span class=K>input</span> <span class=K>wire</span> [63:0] <a  onClick="return qs(event,this,24)"  class=SI href="cpummu.v.html#95">w_mtimecmp</a>,
<a name="36"></a>    <span class=K>output</span> <span class=K>wire</span> [63:0] <a  onClick="return qs(event,this,25)"  class=SO href="#358">w_wmtimecmp</a>,
<a name="37"></a>    <span class=K>output</span> <span class=K>wire</span>        <a  onClick="return qs(event,this,26)"  class=SO href="#367">w_clint_we</a>,
    <span class=C>//--------------------------------------------------------------------------------------------//
</span><a name="39"></a>    <span class=K>output</span> <span class=K>wire</span> [31:0]  <a  onClick="return qs(event,this,27)"  class=SO href="#304">w_mem_paddr</a>,
<a name="40"></a>    <span class=K>output</span> <span class=K>wire</span>         <a  onClick="return qs(event,this,28)"  class=SO href="#348">w_tlb_busy</a>,
<a name="41"></a>    <span class=K>output</span> <span class=K>wire</span> [31:0]  <a  onClick="return qs(event,this,29)"  class=SO href="#324">w_dram_addr</a>,
<a name="42"></a>    <span class=K>output</span> <span class=K>wire</span> [31:0]  <a  onClick="return qs(event,this,30)"  class=SO href="#319">w_dram_wdata</a>,
<a name="43"></a>    <span class=K>input</span> <span class=K>wire</span>  [31:0]  <a  onClick="return qs(event,this,31)"  class=SI href="cpummu.v.html#103">w_dram_odata</a>,
<a name="44"></a>    <span class=K>output</span> <span class=K>wire</span>         <a  onClick="return qs(event,this,32)"  class=SO href="#352">w_dram_we_t</a>,
<a name="45"></a>    <span class=K>input</span> <span class=K>wire</span>          <a  onClick="return qs(event,this,33)"  class=SI href="cpummu.v.html#105">w_dram_busy</a>,
<a name="46"></a>    <span class=K>output</span> <span class=K>wire</span> [2:0]   <a  onClick="return qs(event,this,34)"  class=SO href="#329">w_dram_ctrl</a>,
<a name="47"></a>    <span class=K>output</span> <span class=K>wire</span>         <a  onClick="return qs(event,this,35)"  class=SO href="#335">w_dram_le</a>
    );

    <span class=C>/***** Address translation ********************************************************************/</span>
<a name="51"></a>    <span class=K>reg</span>  [31:0] <a  onClick="return qs(event,this,36)"  class=SR href="#202">physical_addr</a>       = 0;
<a name="52"></a>    <span class=K>reg</span>         <a  onClick="return qs(event,this,37)"  class=SR href="#203">page_walk_fail</a>      = 0;

    <span class=C>// Page walk state
</span><a name="55"></a>    <span class=K>reg</span>  [3:0]  <a  onClick="return qs(event,this,38)"  class=SR href="#157">r_pw_state</a>          = 0;

    <span class=C>// Page table entry
</span><a name="58"></a>    <span class=K>reg</span>  [31:0] <a  onClick="return qs(event,this,39)"  class=SR href="#175">L1_pte</a>              = 0;
<a name="59"></a>    <span class=K>reg</span>  [31:0] <a  onClick="return qs(event,this,40)"  class=SR href="#193">L0_pte</a>              = 0;

    <span class=C>/***** Micro Controller ***********************************************************************/</span>
<a name="62"></a>    <span class=K>reg</span>   [1:0] <a  onClick="return qs(event,this,41)"  class=SR href="#62">r_mc_mode</a>           = 0;

    <span class=C>/**********************************************************************************************/</span>

<a name="66"></a>    <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,42)"  class=SW href="#66">w_mc_addr</a>;
<a name="67"></a>    <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,43)"  class=SW href="#67">w_mc_wdata</a>;
<a name="68"></a>    <span class=K>wire</span>        <a  onClick="return qs(event,this,44)"  class=SW href="#68">w_mc_we</a>;
<a name="69"></a>    <span class=K>wire</span>  [2:0] <a  onClick="return qs(event,this,45)"  class=SW href="#69">w_mc_ctrl</a>;
<a name="70"></a>    <span class=K>wire</span>  [1:0] <a  onClick="return qs(event,this,46)"  class=SW href="#70">w_mc_aces</a>;

<a name="72"></a>    <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,47)"  class=SW href="#72">w_mem_wdata</a> = (<a  onClick="return qs(event,this,41)"  class=SR href="#62">r_mc_mode</a>!=0) ? <a  onClick="return qs(event,this,43)"  class=SW href="#67">w_mc_wdata</a>  : <a  onClick="return qs(event,this,10)"  class=SI href="#22">w_data_wdata</a>;


    <span class=C>/***********************************        Page walk       ***********************************/</span>
<a name="76"></a>    <span class=K>wire</span>        <a  onClick="return qs(event,this,48)"  class=SW href="#76">w_iscode</a>        = (<a  onClick="return qs(event,this,21)"  class=SI href="#31">w_tlb_req</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#332">ACCESS_CODE</a>);
<a name="77"></a>    <span class=K>wire</span>        <a  onClick="return qs(event,this,49)"  class=SW href="#77">w_isread</a>        = (<a  onClick="return qs(event,this,21)"  class=SI href="#31">w_tlb_req</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#330">ACCESS_READ</a>);
<a name="78"></a>    <span class=K>wire</span>        <a  onClick="return qs(event,this,50)"  class=SW href="#78">w_iswrite</a>       = (<a  onClick="return qs(event,this,21)"  class=SI href="#31">w_tlb_req</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#331">ACCESS_WRITE</a>);
<a name="79"></a>    <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,51)"  class=SW href="#79">v_addr</a>          = <a  onClick="return qs(event,this,48)"  class=SW href="#76">w_iscode</a> ? <a  onClick="return qs(event,this,8)"  class=SI href="#20">w_insn_addr</a> : <a  onClick="return qs(event,this,9)"  class=SI href="#21">w_data_addr</a>;

    <span class=C>/* 
        mstatus[18]=SUM permit Supervisor User Memory access
        mstatus[19]=MXR
        When MXR=0, only loads from pages marked readable (R=1 in Figure 4.17) will succeed.
        When MXR=1, loads from pages marked either readable or executable (R=1 or X=1) will succeed 
    */</span>

    <span class=C>/* pte
       31 20  19 10  9 8 7 6 5 4 3 2 1 0
       PPN[1] PPN[0] RSW D A G U X W R V
        12     10     2  1 1 1 1 1 1 1 1
    */</span>
    <span class=C>/*  virtual address
        31 22  21 12  11        0
        VPN[1] VPN[0] Page offset
         10     10    12
    */</span>
    <span class=C>/*  physical address
        33 22   21 12 11        0
        PPN[1] PPN[0] Page offset
         12      10   12
    */</span>
    <span class=C>// Level 1
</span><a name="104"></a>    <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,52)"  class=SW href="#104">vpn1</a>            = {22'b0, <a  onClick="return qs(event,this,51)"  class=SW href="#79">v_addr</a>[31:22]};
<a name="105"></a>    <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,53)"  class=SW href="#105">L1_pte_addr</a>     = {<a  onClick="return qs(event,this,18)"  class=SI href="#29">w_satp</a>[19:0], 12'b0} + {<a  onClick="return qs(event,this,52)"  class=SW href="#104">vpn1</a>, 2'b0};
<a name="106"></a>    <span class=K>wire</span>  [2:0] <a  onClick="return qs(event,this,54)"  class=SW href="#106">L1_xwr</a>          = <a  onClick="return qs(event,this,19)"  class=SI href="#29">w_mstatus</a>[<span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#457">MSTATUS_MXR_SHIFT</a>] ? (<a  onClick="return qs(event,this,39)"  class=SR href="#175">L1_pte</a>[3:1] | {2'b0, <a  onClick="return qs(event,this,39)"  class=SR href="#175">L1_pte</a>[3]}) : <a  onClick="return qs(event,this,39)"  class=SR href="#175">L1_pte</a>[3:1];
<a name="107"></a>    <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,55)"  class=SW href="#107">L1_paddr</a>        = {<a  onClick="return qs(event,this,39)"  class=SR href="#175">L1_pte</a>[29:10], 12'h0};
<a name="108"></a>    <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,56)"  class=SW href="#108">L1_p_addr</a>       = {<a  onClick="return qs(event,this,55)"  class=SW href="#107">L1_paddr</a>[31:22], <a  onClick="return qs(event,this,51)"  class=SW href="#79">v_addr</a>[21:0]};
<a name="109"></a>    <span class=K>wire</span>        <a  onClick="return qs(event,this,57)"  class=SW href="#109">L1_write</a>        = !<a  onClick="return qs(event,this,39)"  class=SR href="#175">L1_pte</a>[6] || (!<a  onClick="return qs(event,this,39)"  class=SR href="#175">L1_pte</a>[7] &amp;&amp; <a  onClick="return qs(event,this,50)"  class=SW href="#78">w_iswrite</a>);
<a name="110"></a>    <span class=K>wire</span>        <a  onClick="return qs(event,this,58)"  class=SW href="#110">L1_success</a>      = !(<a  onClick="return qs(event,this,54)"  class=SW href="#106">L1_xwr</a> ==2 || <a  onClick="return qs(event,this,54)"  class=SW href="#106">L1_xwr</a> == 6 ||
                                    (<a  onClick="return qs(event,this,17)"  class=SI href="#29">w_priv</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#427">PRIV_S</a> &amp;&amp; (<a  onClick="return qs(event,this,39)"  class=SR href="#175">L1_pte</a>[4] &amp;&amp; !<a  onClick="return qs(event,this,19)"  class=SI href="#29">w_mstatus</a>[<span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#456">MSTATUS_SUM_SHIFT</a>] &amp;&amp; !<a  onClick="return qs(event,this,39)"  class=SR href="#175">L1_pte</a>[5])) ||
                                    (<a  onClick="return qs(event,this,17)"  class=SI href="#29">w_priv</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#426">PRIV_U</a> &amp;&amp; !<a  onClick="return qs(event,this,39)"  class=SR href="#175">L1_pte</a>[4] &amp;&amp; !<a  onClick="return qs(event,this,39)"  class=SR href="#175">L1_pte</a>[5]) ||
                                    (<a  onClick="return qs(event,this,54)"  class=SW href="#106">L1_xwr</a>[<a  onClick="return qs(event,this,21)"  class=SI href="#31">w_tlb_req</a>] == 0));

    <span class=C>// Level 0
</span><a name="116"></a>    <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,59)"  class=SW href="#116">vpn0</a>            = {22'b0, <a  onClick="return qs(event,this,51)"  class=SW href="#79">v_addr</a>[21:12]};
<a name="117"></a>    <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,60)"  class=SW href="#117">L0_pte_addr</a>     = {<a  onClick="return qs(event,this,39)"  class=SR href="#175">L1_pte</a>[29:10], 12'b0} + {<a  onClick="return qs(event,this,59)"  class=SW href="#116">vpn0</a>, 2'b0};
<a name="118"></a>    <span class=K>wire</span>  [2:0] <a  onClick="return qs(event,this,61)"  class=SW href="#118">L0_xwr</a>          = <a  onClick="return qs(event,this,19)"  class=SI href="#29">w_mstatus</a>[<span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#457">MSTATUS_MXR_SHIFT</a>] ? (<a  onClick="return qs(event,this,40)"  class=SR href="#193">L0_pte</a>[3:1] | {2'b0, <a  onClick="return qs(event,this,40)"  class=SR href="#193">L0_pte</a>[3]}) : <a  onClick="return qs(event,this,40)"  class=SR href="#193">L0_pte</a>[3:1];
<a name="119"></a>    <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,62)"  class=SW href="#119">L0_paddr</a>        = {<a  onClick="return qs(event,this,40)"  class=SR href="#193">L0_pte</a>[29:10], 12'h0};
<a name="120"></a>    <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,63)"  class=SW href="#120">L0_p_addr</a>       = {<a  onClick="return qs(event,this,62)"  class=SW href="#119">L0_paddr</a>[31:12], <a  onClick="return qs(event,this,51)"  class=SW href="#79">v_addr</a>[11:0]};
<a name="121"></a>    <span class=K>wire</span>        <a  onClick="return qs(event,this,64)"  class=SW href="#121">L0_write</a>        = !<a  onClick="return qs(event,this,40)"  class=SR href="#193">L0_pte</a>[6] || (!<a  onClick="return qs(event,this,40)"  class=SR href="#193">L0_pte</a>[7] &amp;&amp; <a  onClick="return qs(event,this,50)"  class=SW href="#78">w_iswrite</a>);
<a name="122"></a>    <span class=K>wire</span>        <a  onClick="return qs(event,this,65)"  class=SW href="#122">L0_success</a>      = !(<a  onClick="return qs(event,this,61)"  class=SW href="#118">L0_xwr</a> ==2 || <a  onClick="return qs(event,this,61)"  class=SW href="#118">L0_xwr</a> == 6 ||
                                    (<a  onClick="return qs(event,this,17)"  class=SI href="#29">w_priv</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#427">PRIV_S</a> &amp;&amp; (<a  onClick="return qs(event,this,40)"  class=SR href="#193">L0_pte</a>[4] &amp;&amp; !<a  onClick="return qs(event,this,19)"  class=SI href="#29">w_mstatus</a>[<span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#456">MSTATUS_SUM_SHIFT</a>]) &amp;&amp; !<a  onClick="return qs(event,this,40)"  class=SR href="#193">L0_pte</a>[5]) ||
                                    (<a  onClick="return qs(event,this,17)"  class=SI href="#29">w_priv</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#426">PRIV_U</a> &amp;&amp; !<a  onClick="return qs(event,this,40)"  class=SR href="#193">L0_pte</a>[4] &amp;&amp; !<a  onClick="return qs(event,this,40)"  class=SR href="#193">L0_pte</a>[5]) ||
                                    (<a  onClick="return qs(event,this,61)"  class=SW href="#118">L0_xwr</a>[<a  onClick="return qs(event,this,21)"  class=SI href="#31">w_tlb_req</a>] == 0));

    <span class=C>// update pte
</span><a name="128"></a>    <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,66)"  class=SW href="#128">L1_pte_write</a>    = <a  onClick="return qs(event,this,39)"  class=SR href="#175">L1_pte</a> | <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#327">PTE_A_MASK</a> | (<a  onClick="return qs(event,this,50)"  class=SW href="#78">w_iswrite</a> ? <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#328">PTE_D_MASK</a> : 0);
<a name="129"></a>    <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,67)"  class=SW href="#129">L0_pte_write</a>    = <a  onClick="return qs(event,this,40)"  class=SR href="#193">L0_pte</a> | <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#327">PTE_A_MASK</a> | (<a  onClick="return qs(event,this,50)"  class=SW href="#78">w_iswrite</a> ? <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#328">PTE_D_MASK</a> : 0);
<a name="130"></a>    <span class=K>wire</span>        <a  onClick="return qs(event,this,68)"  class=SW href="#130">w_pte_we</a>        = (<a  onClick="return qs(event,this,38)"  class=SR href="#157">r_pw_state</a>==5) &amp;&amp; !<a  onClick="return qs(event,this,37)"  class=SR href="#203">page_walk_fail</a> &amp;&amp; 
                                        (((<a  onClick="return qs(event,this,54)"  class=SW href="#106">L1_xwr</a> != 0 &amp;&amp; <a  onClick="return qs(event,this,58)"  class=SW href="#110">L1_success</a>) &amp;&amp; <a  onClick="return qs(event,this,57)"  class=SW href="#109">L1_write</a>) ||
                                         ((<a  onClick="return qs(event,this,61)"  class=SW href="#118">L0_xwr</a> != 0 &amp;&amp; <a  onClick="return qs(event,this,65)"  class=SW href="#122">L0_success</a>) &amp;&amp; <a  onClick="return qs(event,this,64)"  class=SW href="#121">L0_write</a>));
<a name="133"></a>    <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,69)"  class=SW href="#133">w_pte_waddr</a>     = (<a  onClick="return qs(event,this,54)"  class=SW href="#106">L1_xwr</a> != 0 &amp;&amp; <a  onClick="return qs(event,this,58)"  class=SW href="#110">L1_success</a>) ? <a  onClick="return qs(event,this,53)"  class=SW href="#105">L1_pte_addr</a> : <a  onClick="return qs(event,this,60)"  class=SW href="#117">L0_pte_addr</a>;
<a name="134"></a>    <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,70)"  class=SW href="#134">w_pte_wdata</a>     = (<a  onClick="return qs(event,this,54)"  class=SW href="#106">L1_xwr</a> != 0 &amp;&amp; <a  onClick="return qs(event,this,58)"  class=SW href="#110">L1_success</a>) ? <a  onClick="return qs(event,this,66)"  class=SW href="#128">L1_pte_write</a> : <a  onClick="return qs(event,this,67)"  class=SW href="#129">L0_pte_write</a>;

<a name="136"></a>    <span class=K>assign</span> <a  onClick="return qs(event,this,20)"  class=SO href="#30">w_pagefault</a>          = !<a  onClick="return qs(event,this,37)"  class=SR href="#203">page_walk_fail</a> ? ~32'h0 : (<a  onClick="return qs(event,this,48)"  class=SW href="#76">w_iscode</a>) ? <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#357">CAUSE_FETCH_PAGE_FAULT</a> :
                                    (<a  onClick="return qs(event,this,49)"  class=SW href="#77">w_isread</a>) ? <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#358">CAUSE_LOAD_PAGE_FAULT</a> : <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#359">CAUSE_STORE_PAGE_FAULT</a>;

<a name="139"></a>    <span class=K>reg</span>  [31:0] <a  onClick="return qs(event,this,71)"  class=SR href="#163">r_tlb_addr</a> = 0;
<a name="140"></a>    <span class=K>reg</span>   [2:0] <a  onClick="return qs(event,this,72)"  class=SR href="#168">r_tlb_use</a>  = 0;
<a name="141"></a>    <span class=K>wire</span> [21:0] <a  onClick="return qs(event,this,73)"  class=SW href="#279">w_tlb_inst_r_addr</a>, <a  onClick="return qs(event,this,74)"  class=SW href="#283">w_tlb_data_r_addr</a>, <a  onClick="return qs(event,this,75)"  class=SW href="#287">w_tlb_data_w_addr</a>;
<a name="142"></a>    <span class=K>wire</span>        <a  onClick="return qs(event,this,76)"  class=SW href="#279">w_tlb_inst_r_oe</a>, <a  onClick="return qs(event,this,77)"  class=SW href="#283">w_tlb_data_r_oe</a>, <a  onClick="return qs(event,this,78)"  class=SW href="#287">w_tlb_data_w_oe</a>;
<a name="143"></a>    <span class=K>wire</span>        <a  onClick="return qs(event,this,79)"  class=SW href="#143">w_use_tlb</a> = (<a  onClick="return qs(event,this,41)"  class=SR href="#62">r_mc_mode</a>==0 &amp;&amp; (<a  onClick="return qs(event,this,48)"  class=SW href="#76">w_iscode</a> || <a  onClick="return qs(event,this,49)"  class=SW href="#77">w_isread</a> || <a  onClick="return qs(event,this,50)"  class=SW href="#78">w_iswrite</a>)
                                          &amp;&amp; (!(<a  onClick="return qs(event,this,17)"  class=SI href="#29">w_priv</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#429">PRIV_M</a> || <a  onClick="return qs(event,this,18)"  class=SI href="#29">w_satp</a>[31] == 0)));
<a name="145"></a>    <span class=K>wire</span>        <a  onClick="return qs(event,this,80)"  class=SW href="#145">w_tlb_hit</a> = ((<a  onClick="return qs(event,this,48)"  class=SW href="#76">w_iscode</a> &amp;&amp; <a  onClick="return qs(event,this,76)"  class=SW href="#279">w_tlb_inst_r_oe</a>) ||
                            (<a  onClick="return qs(event,this,49)"  class=SW href="#77">w_isread</a> &amp;&amp; <a  onClick="return qs(event,this,77)"  class=SW href="#283">w_tlb_data_r_oe</a>)  ||
                            (<a  onClick="return qs(event,this,50)"  class=SW href="#78">w_iswrite</a> &amp;&amp; <a  onClick="return qs(event,this,78)"  class=SW href="#287">w_tlb_data_w_oe</a>));

<a name="149"></a>    <span class=K>reg</span> <a  onClick="return qs(event,this,81)"  class=SR href="#158">r_dram_was_busy</a>=0, <a  onClick="return qs(event,this,82)"  class=SR href="#248">r_dram_took_cmd</a>=0, <a  onClick="return qs(event,this,83)"  class=SR href="#254">r_data_was_busy</a>=0;
    <span class=C>// PAGE WALK state
</span>    <span class=K>always</span>@(<span class=K>posedge</span> <a  onClick="return qs(event,this,1)"  class=SI href="#14">CLK</a>) <span class=K>begin</span>
        <span class=K>if</span>(<a  onClick="return qs(event,this,38)"  class=SR href="#55">r_pw_state</a> == 0) <span class=K>begin</span>
            <span class=C>// PAGE WALK START
</span>            <span class=K>if</span>(!<a  onClick="return qs(event,this,33)"  class=SI href="#45">w_dram_busy</a> &amp;&amp; <a  onClick="return qs(event,this,79)"  class=SW href="#143">w_use_tlb</a>) <span class=K>begin</span>
                <span class=C>// tlb miss
</span>                <span class=K>if</span>(!<a  onClick="return qs(event,this,80)"  class=SW href="#145">w_tlb_hit</a>) <span class=K>begin</span>
<a name="157"></a>                        <a  onClick="return qs(event,this,38)"  class=SR href="#55">r_pw_state</a> &lt;= 1;
<a name="158"></a>                        <a  onClick="return qs(event,this,81)"  class=SR href="#149">r_dram_was_busy</a> &lt;= 0;
                <span class=K>end</span>
                <span class=K>else</span> <span class=K>begin</span>
                    <a  onClick="return qs(event,this,38)"  class=SR href="#55">r_pw_state</a> &lt;= 6;
                    <span class=K>case</span> ({<a  onClick="return qs(event,this,48)"  class=SW href="#76">w_iscode</a>, <a  onClick="return qs(event,this,49)"  class=SW href="#77">w_isread</a>, <a  onClick="return qs(event,this,50)"  class=SW href="#78">w_iswrite</a>})
<a name="163"></a>                        3'b100 : <a  onClick="return qs(event,this,71)"  class=SR href="#139">r_tlb_addr</a> &lt;= {<a  onClick="return qs(event,this,73)"  class=SW href="#279">w_tlb_inst_r_addr</a>[21:2], <a  onClick="return qs(event,this,8)"  class=SI href="#20">w_insn_addr</a>[11:0]};
                        3'b010 : <a  onClick="return qs(event,this,71)"  class=SR href="#139">r_tlb_addr</a> &lt;= {<a  onClick="return qs(event,this,74)"  class=SW href="#283">w_tlb_data_r_addr</a>[21:2], <a  onClick="return qs(event,this,9)"  class=SI href="#21">w_data_addr</a>[11:0]};
                        3'b001 : <a  onClick="return qs(event,this,71)"  class=SR href="#139">r_tlb_addr</a> &lt;= {<a  onClick="return qs(event,this,75)"  class=SW href="#287">w_tlb_data_w_addr</a>[21:2], <a  onClick="return qs(event,this,9)"  class=SI href="#21">w_data_addr</a>[11:0]};
                        <span class=K>default</span>: <a  onClick="return qs(event,this,71)"  class=SR href="#139">r_tlb_addr</a> &lt;= 0;
                    <span class=K>endcase</span>
<a name="168"></a>                    <a  onClick="return qs(event,this,72)"  class=SR href="#140">r_tlb_use</a> &lt;= {<a  onClick="return qs(event,this,48)"  class=SW href="#76">w_iscode</a>, <a  onClick="return qs(event,this,49)"  class=SW href="#77">w_isread</a>, <a  onClick="return qs(event,this,50)"  class=SW href="#78">w_iswrite</a>};
                <span class=K>end</span>
            <span class=K>end</span>
        <span class=K>end</span>
        <span class=C>// Level 1
</span>        <span class=K>else</span> <span class=K>if</span>(<a  onClick="return qs(event,this,38)"  class=SR href="#55">r_pw_state</a> == 1) <span class=K>begin</span>
            <span class=K>if</span>(<a  onClick="return qs(event,this,81)"  class=SR href="#149">r_dram_was_busy</a> &amp;&amp; !<a  onClick="return qs(event,this,33)"  class=SI href="#45">w_dram_busy</a>) <span class=K>begin</span>
<a name="175"></a>                <a  onClick="return qs(event,this,39)"  class=SR href="#58">L1_pte</a>      &lt;= <a  onClick="return qs(event,this,31)"  class=SI href="#43">w_dram_odata</a>;
                <a  onClick="return qs(event,this,38)"  class=SR href="#55">r_pw_state</a>  &lt;= 2;
                <a  onClick="return qs(event,this,81)"  class=SR href="#149">r_dram_was_busy</a> &lt;= 0;
            <span class=K>end</span> <span class=K>else</span> <span class=K>if</span>(<a  onClick="return qs(event,this,33)"  class=SI href="#45">w_dram_busy</a>)
                <a  onClick="return qs(event,this,81)"  class=SR href="#149">r_dram_was_busy</a> &lt;= 1;
        <span class=K>end</span>
        <span class=K>else</span> <span class=K>if</span>(<a  onClick="return qs(event,this,38)"  class=SR href="#55">r_pw_state</a> == 2) <span class=K>begin</span>
            <span class=K>if</span>(<a  onClick="return qs(event,this,33)"  class=SI href="#45">w_dram_busy</a> &amp;&amp; !(<a  onClick="return qs(event,this,17)"  class=SI href="#29">w_priv</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#429">PRIV_M</a> || <a  onClick="return qs(event,this,18)"  class=SI href="#29">w_satp</a>[31] == 0)) <span class=K>begin</span>
                <span class=ST>$display</span>(<span class=S>&quot;dram_busy in pw_state 2&quot;</span>);
            <span class=K>end</span>
            <span class=K>if</span>(!<a  onClick="return qs(event,this,33)"  class=SI href="#45">w_dram_busy</a>) <span class=K>begin</span>
                <a  onClick="return qs(event,this,38)"  class=SR href="#55">r_pw_state</a> &lt;= 3;
                <a  onClick="return qs(event,this,81)"  class=SR href="#149">r_dram_was_busy</a> &lt;= 0;
            <span class=K>end</span>
        <span class=K>end</span>
        <span class=C>// Level 0
</span>        <span class=K>else</span> <span class=K>if</span>(<a  onClick="return qs(event,this,38)"  class=SR href="#55">r_pw_state</a> == 3) <span class=K>begin</span>
            <span class=K>if</span>(<a  onClick="return qs(event,this,81)"  class=SR href="#149">r_dram_was_busy</a> &amp;&amp; !<a  onClick="return qs(event,this,33)"  class=SI href="#45">w_dram_busy</a>) <span class=K>begin</span>
<a name="193"></a>                <a  onClick="return qs(event,this,40)"  class=SR href="#59">L0_pte</a>      &lt;= <a  onClick="return qs(event,this,31)"  class=SI href="#43">w_dram_odata</a>;
                <a  onClick="return qs(event,this,38)"  class=SR href="#55">r_pw_state</a>  &lt;= 4;
                <a  onClick="return qs(event,this,81)"  class=SR href="#149">r_dram_was_busy</a> &lt;= 0;
            <span class=K>end</span> <span class=K>else</span> <span class=K>if</span>(<a  onClick="return qs(event,this,33)"  class=SI href="#45">w_dram_busy</a>)
                <a  onClick="return qs(event,this,81)"  class=SR href="#149">r_dram_was_busy</a> &lt;= 1;
        <span class=K>end</span>
        <span class=C>// Success?
</span>        <span class=K>else</span> <span class=K>if</span>(<a  onClick="return qs(event,this,38)"  class=SR href="#55">r_pw_state</a> == 4) <span class=K>begin</span>
            <span class=K>if</span>(!<a  onClick="return qs(event,this,39)"  class=SR href="#58">L1_pte</a>[0]) <span class=K>begin</span>
<a name="202"></a>                <a  onClick="return qs(event,this,36)"  class=SR href="#51">physical_addr</a>   &lt;= 0;
<a name="203"></a>                <a  onClick="return qs(event,this,37)"  class=SR href="#52">page_walk_fail</a>  &lt;= 1;
            <span class=K>end</span>
            <span class=K>else</span> <span class=K>if</span>(<a  onClick="return qs(event,this,54)"  class=SW href="#106">L1_xwr</a>) <span class=K>begin</span>
                <a  onClick="return qs(event,this,36)"  class=SR href="#51">physical_addr</a>   &lt;= (<a  onClick="return qs(event,this,58)"  class=SW href="#110">L1_success</a>) ? <a  onClick="return qs(event,this,56)"  class=SW href="#108">L1_p_addr</a> : 0;
                <a  onClick="return qs(event,this,37)"  class=SR href="#52">page_walk_fail</a>  &lt;= (<a  onClick="return qs(event,this,58)"  class=SW href="#110">L1_success</a>) ? 0 : 1;
            <span class=K>end</span>
            <span class=K>else</span> <span class=K>if</span>(!<a  onClick="return qs(event,this,40)"  class=SR href="#59">L0_pte</a>[0]) <span class=K>begin</span>
                <a  onClick="return qs(event,this,36)"  class=SR href="#51">physical_addr</a>   &lt;= 0;
                <a  onClick="return qs(event,this,37)"  class=SR href="#52">page_walk_fail</a>  &lt;= 1;
            <span class=K>end</span>
            <span class=K>else</span> <span class=K>if</span>(<a  onClick="return qs(event,this,61)"  class=SW href="#118">L0_xwr</a>) <span class=K>begin</span>
                <a  onClick="return qs(event,this,36)"  class=SR href="#51">physical_addr</a>   &lt;= (<a  onClick="return qs(event,this,65)"  class=SW href="#122">L0_success</a>) ? <a  onClick="return qs(event,this,63)"  class=SW href="#120">L0_p_addr</a> : 0;
                <a  onClick="return qs(event,this,37)"  class=SR href="#52">page_walk_fail</a>  &lt;= (<a  onClick="return qs(event,this,65)"  class=SW href="#122">L0_success</a>) ? 0 : 1;
            <span class=K>end</span> <span class=K>else</span> <span class=K>begin</span>
                <span class=ST>$display</span>(<span class=S>&quot;r_pw_state == 4 and no if met&quot;</span>);
                <span class=ST>$finish</span>;
            <span class=K>end</span>
            <a  onClick="return qs(event,this,38)"  class=SR href="#55">r_pw_state</a>  &lt;= 5;
        <span class=K>end</span>
        <span class=C>// Update pte
</span>        <span class=K>else</span> <span class=K>if</span>(<a  onClick="return qs(event,this,38)"  class=SR href="#55">r_pw_state</a> == 5) <span class=K>begin</span>
                <span class=C>//if(page_walk_fail || !w_pte_we) begin
</span>                    <a  onClick="return qs(event,this,38)"  class=SR href="#55">r_pw_state</a>      &lt;= 0;
                    <a  onClick="return qs(event,this,36)"  class=SR href="#51">physical_addr</a>   &lt;= 0;
                    <a  onClick="return qs(event,this,37)"  class=SR href="#52">page_walk_fail</a>  &lt;= 0;
                    <span class=K>if</span>(<a  onClick="return qs(event,this,37)"  class=SR href="#52">page_walk_fail</a>) <span class=K>begin</span>
                        <span class=ST>$display</span>(<span class=S>&quot;~ fault=%x ia=%x da=%x vaddr=%x hart=%x grant=%x pc=%x ir=%x&quot;</span>, 
                            <a  onClick="return qs(event,this,20)"  class=SO href="#30">w_pagefault</a>, <a  onClick="return qs(event,this,8)"  class=SI href="#20">w_insn_addr</a>, <a  onClick="return qs(event,this,9)"  class=SI href="#21">w_data_addr</a>, <a  onClick="return qs(event,this,51)"  class=SW href="#79">v_addr</a>, <a  onClick="return qs(event,this,3)"  class=SI href="#15">w_hart_id</a>, <a  onClick="return qs(event,this,4)"  class=SI href="#16">w_grant</a>, <a  onClick="return qs(event,this,5)"  class=SI href="#17">w_pc</a>, <a  onClick="return qs(event,this,6)"  class=SI href="#18">w_ir</a>);
                        <span class=K>if</span>(<a  onClick="return qs(event,this,68)"  class=SW href="#130">w_pte_we</a>) <span class=K>begin</span>
                            <span class=ST>$display</span>(<span class=S>&quot;-----pte-we in pagefault-----&quot;</span>);
                            <span class=C>//$finish;
</span>                        <span class=K>end</span>
                    <span class=K>end</span>
                <span class=C>//end
</span>                <span class=K>if</span>(<a  onClick="return qs(event,this,33)"  class=SI href="#45">w_dram_busy</a>) <span class=K>begin</span>
                    <span class=ST>$display</span>(<span class=S>&quot;dram busy in r_pw_state 5&quot;</span>);
                    <span class=ST>$finish</span>;
                <span class=K>end</span>
                       
        <span class=K>end</span>
        <span class=K>else</span> <span class=K>if</span>(<a  onClick="return qs(event,this,38)"  class=SR href="#55">r_pw_state</a> == 6) <span class=K>begin</span>
            <span class=K>if</span>(<a  onClick="return qs(event,this,84)"  class=SW href="#333">w_dram_aces</a> &amp;&amp; (<a  onClick="return qs(event,this,35)"  class=SO href="#47">w_dram_le</a> || <a  onClick="return qs(event,this,85)"  class=SW href="#321">w_dram_we</a>)) <span class=K>begin</span>
                <span class=K>if</span>(<a  onClick="return qs(event,this,33)"  class=SI href="#45">w_dram_busy</a>) <span class=K>begin</span>
                    <a  onClick="return qs(event,this,38)"  class=SR href="#55">r_pw_state</a> &lt;= 7;
                    <a  onClick="return qs(event,this,72)"  class=SR href="#140">r_tlb_use</a> &lt;= 0;
<a name="248"></a>                    <a  onClick="return qs(event,this,82)"  class=SR href="#149">r_dram_took_cmd</a> &lt;= 1;
                <span class=K>end</span>
            <span class=K>end</span> <span class=K>else</span> <span class=K>if</span>(<a  onClick="return qs(event,this,13)"  class=SO href="#25">w_data_le</a> || <a  onClick="return qs(event,this,12)"  class=SO href="#24">w_data_we</a>) <span class=K>begin</span>
                <span class=K>if</span>(<a  onClick="return qs(event,this,14)"  class=SI href="#26">w_data_busy</a>) <span class=K>begin</span>
                    <a  onClick="return qs(event,this,38)"  class=SR href="#55">r_pw_state</a> &lt;= 7;
                    <a  onClick="return qs(event,this,72)"  class=SR href="#140">r_tlb_use</a> &lt;= 0;
<a name="254"></a>                    <a  onClick="return qs(event,this,83)"  class=SR href="#149">r_data_was_busy</a> &lt;= 1;
                <span class=K>end</span>
            <span class=K>end</span> <span class=K>else</span> <span class=K>begin</span>
                <span class=ST>$display</span>(<span class=S>&quot;mmu state 6 and nothing to do&quot;</span>);
                <span class=ST>$finish</span>();
            <span class=K>end</span>
        <span class=K>end</span>
        <span class=K>else</span> <span class=K>if</span>(<a  onClick="return qs(event,this,38)"  class=SR href="#55">r_pw_state</a> == 7 &amp;&amp; 
                ((!<a  onClick="return qs(event,this,33)"  class=SI href="#45">w_dram_busy</a> &amp;&amp; <a  onClick="return qs(event,this,82)"  class=SR href="#149">r_dram_took_cmd</a>) || 
                (<a  onClick="return qs(event,this,83)"  class=SR href="#149">r_data_was_busy</a> &amp;&amp; <a  onClick="return qs(event,this,14)"  class=SI href="#26">w_data_busy</a>==0))) <span class=K>begin</span>
            <a  onClick="return qs(event,this,38)"  class=SR href="#55">r_pw_state</a> &lt;= 0;
            <a  onClick="return qs(event,this,72)"  class=SR href="#140">r_tlb_use</a> &lt;= 0;
            <a  onClick="return qs(event,this,82)"  class=SR href="#149">r_dram_took_cmd</a> &lt;= 0;
            <a  onClick="return qs(event,this,83)"  class=SR href="#149">r_data_was_busy</a> &lt;= 0;
        <span class=K>end</span>
    <span class=K>end</span>
    
    <span class=C>/***********************************           TLB          ***********************************/</span>
<a name="272"></a>    <span class=K>wire</span>        <a  onClick="return qs(event,this,86)"  class=SW href="#272">w_tlb_inst_r_we</a>   = (<a  onClick="return qs(event,this,38)"  class=SR href="#157">r_pw_state</a> == 5 &amp;&amp; !<a  onClick="return qs(event,this,37)"  class=SR href="#203">page_walk_fail</a> &amp;&amp; <a  onClick="return qs(event,this,48)"  class=SW href="#76">w_iscode</a>);
<a name="273"></a>    <span class=K>wire</span>        <a  onClick="return qs(event,this,87)"  class=SW href="#273">w_tlb_data_r_we</a>   = (<a  onClick="return qs(event,this,38)"  class=SR href="#157">r_pw_state</a> == 5 &amp;&amp; !<a  onClick="return qs(event,this,37)"  class=SR href="#203">page_walk_fail</a> &amp;&amp; <a  onClick="return qs(event,this,49)"  class=SW href="#77">w_isread</a>);
<a name="274"></a>    <span class=K>wire</span>        <a  onClick="return qs(event,this,88)"  class=SW href="#274">w_tlb_data_w_we</a>   = (<a  onClick="return qs(event,this,38)"  class=SR href="#157">r_pw_state</a> == 5 &amp;&amp; !<a  onClick="return qs(event,this,37)"  class=SR href="#203">page_walk_fail</a> &amp;&amp; <a  onClick="return qs(event,this,50)"  class=SW href="#78">w_iswrite</a>);
<a name="275"></a>    <span class=K>wire</span> [21:0] <a  onClick="return qs(event,this,89)"  class=SW href="#275">w_tlb_wdata</a>       = {<a  onClick="return qs(event,this,36)"  class=SR href="#202">physical_addr</a>[31:12], 2'b0};

<a name="m_mmu_TLB_inst_r"></a><a name="277"></a>    <a  onClick="return qs(event,this,0)"  class=MM href="#m_tlb">m_tlb</a>#(20, 22, <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#279">TLB_SIZE</a>) TLB_inst_r (<a  onClick="return qs(event,this,1)"  class=SI href="#14">CLK</a>, 1'b1, <a  onClick="return qs(event,this,22)"  class=SI href="#32">w_tlb_flush</a>, <a  onClick="return qs(event,this,86)"  class=SW href="#272">w_tlb_inst_r_we</a>,
<a name="278"></a>                                            <a  onClick="return qs(event,this,8)"  class=SI href="#20">w_insn_addr</a>[31:12], <a  onClick="return qs(event,this,8)"  class=SI href="#20">w_insn_addr</a>[31:12], <a  onClick="return qs(event,this,89)"  class=SW href="#275">w_tlb_wdata</a>,
<a name="279"></a>                                            <a  onClick="return qs(event,this,73)"  class=SW href="#141">w_tlb_inst_r_addr</a>, <a  onClick="return qs(event,this,76)"  class=SW href="#142">w_tlb_inst_r_oe</a>);

<a name="m_mmu_TLB_data_r"></a><a name="281"></a>    <a  onClick="return qs(event,this,0)"  class=MM href="#m_tlb">m_tlb</a>#(20, 22, <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#279">TLB_SIZE</a>) TLB_data_r (<a  onClick="return qs(event,this,1)"  class=SI href="#14">CLK</a>, 1'b1, <a  onClick="return qs(event,this,22)"  class=SI href="#32">w_tlb_flush</a>, <a  onClick="return qs(event,this,87)"  class=SW href="#273">w_tlb_data_r_we</a>,
<a name="282"></a>                                            <a  onClick="return qs(event,this,9)"  class=SI href="#21">w_data_addr</a>[31:12], <a  onClick="return qs(event,this,9)"  class=SI href="#21">w_data_addr</a>[31:12], <a  onClick="return qs(event,this,89)"  class=SW href="#275">w_tlb_wdata</a>,
<a name="283"></a>                                            <a  onClick="return qs(event,this,74)"  class=SW href="#141">w_tlb_data_r_addr</a>, <a  onClick="return qs(event,this,77)"  class=SW href="#142">w_tlb_data_r_oe</a>);

<a name="m_mmu_TLB_data_w"></a>    <a  onClick="return qs(event,this,0)"  class=MM href="#m_tlb">m_tlb</a>#(20, 22, <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#279">TLB_SIZE</a>) TLB_data_w (<a  onClick="return qs(event,this,1)"  class=SI href="#14">CLK</a>, 1'b1, <a  onClick="return qs(event,this,22)"  class=SI href="#32">w_tlb_flush</a>, <a  onClick="return qs(event,this,88)"  class=SW href="#274">w_tlb_data_w_we</a>,
                                            <a  onClick="return qs(event,this,9)"  class=SI href="#21">w_data_addr</a>[31:12], <a  onClick="return qs(event,this,9)"  class=SI href="#21">w_data_addr</a>[31:12], <a  onClick="return qs(event,this,89)"  class=SW href="#275">w_tlb_wdata</a>,
<a name="287"></a>                                            <a  onClick="return qs(event,this,75)"  class=SW href="#141">w_tlb_data_w_addr</a>, <a  onClick="return qs(event,this,78)"  class=SW href="#142">w_tlb_data_w_oe</a>);

    <span class=C>/***********************************          Memory        ***********************************/</span>
<a name="290"></a>    <span class=K>reg</span>  [31:0] <a  onClick="return qs(event,this,90)"  class=SR href="#294">r_tlb_pte_addr</a> = 0;
<a name="291"></a>    <span class=K>reg</span>         <a  onClick="return qs(event,this,91)"  class=SR href="#294">r_tlb_acs</a> = 0;
    <span class=K>always</span>@(*)<span class=K>begin</span>
        <span class=K>case</span> (<a  onClick="return qs(event,this,38)"  class=SR href="#55">r_pw_state</a>)
<a name="294"></a>            0:      <span class=K>begin</span> <a  onClick="return qs(event,this,90)"  class=SR href="#290">r_tlb_pte_addr</a> &lt;= <a  onClick="return qs(event,this,53)"  class=SW href="#105">L1_pte_addr</a>;    <a  onClick="return qs(event,this,91)"  class=SR href="#291">r_tlb_acs</a> = 1; <span class=K>end</span>
            2:      <span class=K>begin</span> <a  onClick="return qs(event,this,90)"  class=SR href="#290">r_tlb_pte_addr</a> &lt;= <a  onClick="return qs(event,this,60)"  class=SW href="#117">L0_pte_addr</a>;    <a  onClick="return qs(event,this,91)"  class=SR href="#291">r_tlb_acs</a> = 1; <span class=K>end</span>
            5:      <span class=K>begin</span> <a  onClick="return qs(event,this,90)"  class=SR href="#290">r_tlb_pte_addr</a> &lt;= <a  onClick="return qs(event,this,69)"  class=SW href="#133">w_pte_waddr</a>;    <a  onClick="return qs(event,this,91)"  class=SR href="#291">r_tlb_acs</a> = 1; <span class=K>end</span>
            <span class=K>default</span>:<span class=K>begin</span> <a  onClick="return qs(event,this,90)"  class=SR href="#290">r_tlb_pte_addr</a> &lt;= 0;              <a  onClick="return qs(event,this,91)"  class=SR href="#291">r_tlb_acs</a> = 0; <span class=K>end</span>
        <span class=K>endcase</span>
    <span class=K>end</span>

<a name="301"></a>    <span class=K>wire</span> [31:0] <a  onClick="return qs(event,this,92)"  class=SW href="#301">w_insn_paddr</a> =  (<a  onClick="return qs(event,this,17)"  class=SI href="#29">w_priv</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#429">PRIV_M</a> || <a  onClick="return qs(event,this,18)"  class=SI href="#29">w_satp</a>[31] == 0) ? <a  onClick="return qs(event,this,8)"  class=SI href="#20">w_insn_addr</a> :
                                <a  onClick="return qs(event,this,71)"  class=SR href="#163">r_tlb_addr</a>;

<a name="304"></a>    <span class=K>assign</span> <a  onClick="return qs(event,this,27)"  class=SO href="#39">w_mem_paddr</a>  =  (<a  onClick="return qs(event,this,41)"  class=SR href="#62">r_mc_mode</a> != 0)                        ? <a  onClick="return qs(event,this,42)"  class=SW href="#66">w_mc_addr</a>     :
                                (<a  onClick="return qs(event,this,17)"  class=SI href="#29">w_priv</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#429">PRIV_M</a> || <a  onClick="return qs(event,this,18)"  class=SI href="#29">w_satp</a>[31] == 0)  ? <a  onClick="return qs(event,this,9)"  class=SI href="#21">w_data_addr</a>   : <a  onClick="return qs(event,this,71)"  class=SR href="#163">r_tlb_addr</a>;

<a name="307"></a>    <span class=K>wire</span> [2:0]  <a  onClick="return qs(event,this,93)"  class=SW href="#307">w_mem_ctrl</a>   =  (<a  onClick="return qs(event,this,41)"  class=SR href="#62">r_mc_mode</a> != 0)                        ? <a  onClick="return qs(event,this,45)"  class=SW href="#69">w_mc_ctrl</a>         :
                                (<a  onClick="return qs(event,this,17)"  class=SI href="#29">w_priv</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#429">PRIV_M</a> || <a  onClick="return qs(event,this,18)"  class=SI href="#29">w_satp</a>[31] == 0)  ? <a  onClick="return qs(event,this,15)"  class=SI href="#27">w_data_ctrl</a>       :
                                (<a  onClick="return qs(event,this,72)"  class=SR href="#168">r_tlb_use</a>[1:0]!=0)                     ? <a  onClick="return qs(event,this,15)"  class=SI href="#27">w_data_ctrl</a>       :
                                (<a  onClick="return qs(event,this,38)"  class=SR href="#157">r_pw_state</a> == 0)                       ? <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#589">FUNCT3_LW____</a>    :
                                (<a  onClick="return qs(event,this,38)"  class=SR href="#157">r_pw_state</a> == 2)                       ? <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#589">FUNCT3_LW____</a>    :
                                (<a  onClick="return qs(event,this,38)"  class=SR href="#157">r_pw_state</a> == 5)                       ? <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#581">FUNCT3_SW____</a>    :
                                <a  onClick="return qs(event,this,15)"  class=SI href="#27">w_data_ctrl</a>;

<a name="315"></a>    <span class=K>wire</span>  [3:0] <a  onClick="return qs(event,this,94)"  class=SW href="#315">w_dev</a>       = <a  onClick="return qs(event,this,27)"  class=SO href="#304">w_mem_paddr</a>[31:28];<span class=C>// &amp; 32'hf0000000;
</span><a name="316"></a>    <span class=K>wire</span>  [3:0] <a  onClick="return qs(event,this,95)"  class=SW href="#316">w_virt</a>      = <a  onClick="return qs(event,this,27)"  class=SO href="#304">w_mem_paddr</a>[27:24];<span class=C>// &amp; 32'h0f000000;
</span><a name="317"></a>    <span class=K>wire</span> [27:0] <a  onClick="return qs(event,this,96)"  class=SW href="#317">w_offset</a>    = <a  onClick="return qs(event,this,27)"  class=SO href="#304">w_mem_paddr</a> &amp; 32'h7ffffff;

<a name="319"></a>    <span class=K>assign</span> <a  onClick="return qs(event,this,30)"  class=SO href="#42">w_dram_wdata</a>         = (<a  onClick="return qs(event,this,38)"  class=SR href="#157">r_pw_state</a> == 5) ? <a  onClick="return qs(event,this,70)"  class=SW href="#134">w_pte_wdata</a> : <a  onClick="return qs(event,this,47)"  class=SW href="#72">w_mem_wdata</a>;
    
<a name="321"></a>    <span class=K>wire</span>      <a  onClick="return qs(event,this,85)"  class=SW href="#321">w_dram_we</a>       = (<a  onClick="return qs(event,this,11)"  class=SI href="#23">w_proc_data_we</a> &amp;&amp; !<a  onClick="return qs(event,this,28)"  class=SO href="#348">w_tlb_busy</a>
                                    &amp;&amp; (<a  onClick="return qs(event,this,94)"  class=SW href="#315">w_dev</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#265">MEM_BASE_TADDR</a> || <a  onClick="return qs(event,this,94)"  class=SW href="#315">w_dev</a> == 0));

<a name="324"></a>    <span class=K>assign</span> <a  onClick="return qs(event,this,29)"  class=SO href="#41">w_dram_addr</a>          =   (<a  onClick="return qs(event,this,41)"  class=SR href="#62">r_mc_mode</a>!=0)              ? <a  onClick="return qs(event,this,42)"  class=SW href="#66">w_mc_addr</a>         :
                                (<a  onClick="return qs(event,this,48)"  class=SW href="#76">w_iscode</a> &amp;&amp; !<a  onClick="return qs(event,this,28)"  class=SO href="#348">w_tlb_busy</a>)   ? <a  onClick="return qs(event,this,92)"  class=SW href="#301">w_insn_paddr</a>      :
                                (<a  onClick="return qs(event,this,17)"  class=SI href="#29">w_priv</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#429">PRIV_M</a> || <a  onClick="return qs(event,this,18)"  class=SI href="#29">w_satp</a>[31] == 0) ? <a  onClick="return qs(event,this,9)"  class=SI href="#21">w_data_addr</a> :
                                (<a  onClick="return qs(event,this,91)"  class=SR href="#294">r_tlb_acs</a> &amp;&amp; !<a  onClick="return qs(event,this,80)"  class=SW href="#145">w_tlb_hit</a>)   ? <a  onClick="return qs(event,this,90)"  class=SR href="#294">r_tlb_pte_addr</a>    : <a  onClick="return qs(event,this,27)"  class=SO href="#304">w_mem_paddr</a>;

<a name="329"></a>    <span class=K>assign</span>          <a  onClick="return qs(event,this,34)"  class=SO href="#46">w_dram_ctrl</a> =   (<a  onClick="return qs(event,this,41)"  class=SR href="#62">r_mc_mode</a>!=0)              ? (<a  onClick="return qs(event,this,93)"  class=SW href="#307">w_mem_ctrl</a>)      :
                                (<a  onClick="return qs(event,this,48)"  class=SW href="#76">w_iscode</a> &amp;&amp; !<a  onClick="return qs(event,this,28)"  class=SO href="#348">w_tlb_busy</a>)   ? <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#589">FUNCT3_LW____</a>    : <a  onClick="return qs(event,this,93)"  class=SW href="#307">w_mem_ctrl</a>;
<a name="331"></a>    <span class=K>assign</span>      <a  onClick="return qs(event,this,16)"  class=SO href="#28">w_insn_data</a> =   <a  onClick="return qs(event,this,31)"  class=SI href="#43">w_dram_odata</a>;

<a name="333"></a>    <span class=K>wire</span>        <a  onClick="return qs(event,this,84)"  class=SW href="#333">w_dram_aces</a> = (<a  onClick="return qs(event,this,29)"  class=SO href="#324">w_dram_addr</a>[31:28] == 8 || <a  onClick="return qs(event,this,29)"  class=SO href="#324">w_dram_addr</a>[31:28] == 0 || <a  onClick="return qs(event,this,29)"  class=SO href="#324">w_dram_addr</a>[31:28] == 9);

<a name="335"></a>    <span class=K>assign</span>        <a  onClick="return qs(event,this,35)"  class=SO href="#47">w_dram_le</a>   =
                    <span class=C>//(w_dram_busy)  ? 0 :
</span>                    (!<a  onClick="return qs(event,this,84)"  class=SW href="#333">w_dram_aces</a>) ? 0 :
                    (<a  onClick="return qs(event,this,41)"  class=SR href="#62">r_mc_mode</a>!=0) ? (<a  onClick="return qs(event,this,46)"  class=SW href="#70">w_mc_aces</a>==<span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#330">ACCESS_READ</a> &amp;&amp; <a  onClick="return qs(event,this,42)"  class=SW href="#66">w_mc_addr</a>[31:28] != 0) :
                    (<a  onClick="return qs(event,this,17)"  class=SI href="#29">w_priv</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#429">PRIV_M</a> || <a  onClick="return qs(event,this,18)"  class=SI href="#29">w_satp</a>[31] == 0) ? (<a  onClick="return qs(event,this,48)"  class=SW href="#76">w_iscode</a> || <a  onClick="return qs(event,this,49)"  class=SW href="#77">w_isread</a>) :
                    (<a  onClick="return qs(event,this,72)"  class=SR href="#168">r_tlb_use</a>[2:1]!=0 &amp;&amp; !<a  onClick="return qs(event,this,28)"  class=SO href="#348">w_tlb_busy</a>) ? 1 :
                    (<a  onClick="return qs(event,this,28)"  class=SO href="#348">w_tlb_busy</a> &amp;&amp; !<a  onClick="return qs(event,this,80)"  class=SW href="#145">w_tlb_hit</a> &amp;&amp; (<a  onClick="return qs(event,this,38)"  class=SR href="#157">r_pw_state</a> == 0 || <a  onClick="return qs(event,this,38)"  class=SR href="#157">r_pw_state</a>==2)) ? 1 : 0;

    
<a name="344"></a>    <span class=K>assign</span>      <a  onClick="return qs(event,this,13)"  class=SO href="#25">w_data_le</a> = <a  onClick="return qs(event,this,49)"  class=SW href="#77">w_isread</a> &amp;&amp; !<a  onClick="return qs(event,this,28)"  class=SO href="#348">w_tlb_busy</a> &amp;&amp; !<a  onClick="return qs(event,this,84)"  class=SW href="#333">w_dram_aces</a>;
<a name="345"></a>    <span class=K>assign</span>      <a  onClick="return qs(event,this,12)"  class=SO href="#24">w_data_we</a> = (<a  onClick="return qs(event,this,50)"  class=SW href="#78">w_iswrite</a> || <a  onClick="return qs(event,this,11)"  class=SI href="#23">w_proc_data_we</a>) &amp;&amp; !<a  onClick="return qs(event,this,28)"  class=SO href="#348">w_tlb_busy</a> &amp;&amp; !<a  onClick="return qs(event,this,84)"  class=SW href="#333">w_dram_aces</a>;

    <span class=C>/***********************************           BUSY         ***********************************/</span>
<a name="348"></a>    <span class=K>assign</span> <a  onClick="return qs(event,this,28)"  class=SO href="#40">w_tlb_busy</a> = 
                    !(<a  onClick="return qs(event,this,79)"  class=SW href="#143">w_use_tlb</a>)                            ? 0 :
                    (<a  onClick="return qs(event,this,38)"  class=SR href="#157">r_pw_state</a> == 6)                       ? 0 : 1;

<a name="352"></a>    <span class=K>assign</span> <a  onClick="return qs(event,this,32)"  class=SO href="#44">w_dram_we_t</a> =   <a  onClick="return qs(event,this,68)"  class=SW href="#130">w_pte_we</a> || <a  onClick="return qs(event,this,85)"  class=SW href="#321">w_dram_we</a>;

    <span class=C>//assign w_proc_busy = w_tlb_busy || w_dram_busy;
</span><a name="355"></a>    <span class=K>assign</span> <a  onClick="return qs(event,this,23)"  class=SO href="#33">w_proc_busy</a> = (<a  onClick="return qs(event,this,79)"  class=SW href="#143">w_use_tlb</a> &amp;&amp; (<a  onClick="return qs(event,this,38)"  class=SR href="#157">r_pw_state</a> &lt; 7)) || <a  onClick="return qs(event,this,33)"  class=SI href="#45">w_dram_busy</a> || (<a  onClick="return qs(event,this,14)"  class=SI href="#26">w_data_busy</a>);
    <span class=C>/**************************************************************************************************/</span>
    
<a name="358"></a>    <span class=K>assign</span> <a  onClick="return qs(event,this,25)"  class=SO href="#36">w_wmtimecmp</a>  = (<a  onClick="return qs(event,this,94)"  class=SW href="#315">w_dev</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#216">CLINT_BASE_TADDR</a> &amp;&amp; (<a  onClick="return qs(event,this,96)"  class=SW href="#317">w_offset</a>==28'h4000 &amp;&amp; <a  onClick="return qs(event,this,3)"  class=SI href="#15">w_hart_id</a> == 0) &amp;&amp; <a  onClick="return qs(event,this,11)"  class=SI href="#23">w_proc_data_we</a>) ?
                                {<a  onClick="return qs(event,this,24)"  class=SI href="#35">w_mtimecmp</a>[63:32], <a  onClick="return qs(event,this,10)"  class=SI href="#22">w_data_wdata</a>} :
                           (<a  onClick="return qs(event,this,94)"  class=SW href="#315">w_dev</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#216">CLINT_BASE_TADDR</a> &amp;&amp; (<a  onClick="return qs(event,this,96)"  class=SW href="#317">w_offset</a>==28'h4004 &amp;&amp; <a  onClick="return qs(event,this,3)"  class=SI href="#15">w_hart_id</a> == 0) &amp;&amp; <a  onClick="return qs(event,this,11)"  class=SI href="#23">w_proc_data_we</a>) ?
                                {<a  onClick="return qs(event,this,10)"  class=SI href="#22">w_data_wdata</a>, <a  onClick="return qs(event,this,24)"  class=SI href="#35">w_mtimecmp</a>[31:0]} : 
                           (<a  onClick="return qs(event,this,94)"  class=SW href="#315">w_dev</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#216">CLINT_BASE_TADDR</a> &amp;&amp; (<a  onClick="return qs(event,this,96)"  class=SW href="#317">w_offset</a>==28'h4008 &amp;&amp; <a  onClick="return qs(event,this,3)"  class=SI href="#15">w_hart_id</a> == 1) &amp;&amp; <a  onClick="return qs(event,this,11)"  class=SI href="#23">w_proc_data_we</a>) ?
                                {<a  onClick="return qs(event,this,24)"  class=SI href="#35">w_mtimecmp</a>[63:32], <a  onClick="return qs(event,this,10)"  class=SI href="#22">w_data_wdata</a>} :
                           (<a  onClick="return qs(event,this,94)"  class=SW href="#315">w_dev</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#216">CLINT_BASE_TADDR</a> &amp;&amp; (<a  onClick="return qs(event,this,96)"  class=SW href="#317">w_offset</a>==28'h400c &amp;&amp; <a  onClick="return qs(event,this,3)"  class=SI href="#15">w_hart_id</a> == 1) &amp;&amp; <a  onClick="return qs(event,this,11)"  class=SI href="#23">w_proc_data_we</a>) ?
                                {<a  onClick="return qs(event,this,10)"  class=SI href="#22">w_data_wdata</a>, <a  onClick="return qs(event,this,24)"  class=SI href="#35">w_mtimecmp</a>[31:0]} : 0;
    <span class=C>/* the clint we will be done before busy */</span>
<a name="367"></a>    <span class=K>assign</span> <a  onClick="return qs(event,this,26)"  class=SO href="#37">w_clint_we</a>   = ((<a  onClick="return qs(event,this,94)"  class=SW href="#315">w_dev</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#216">CLINT_BASE_TADDR</a>) &amp;&amp; <a  onClick="return qs(event,this,11)"  class=SI href="#23">w_proc_data_we</a> &amp;&amp; 
                           ((<a  onClick="return qs(event,this,96)"  class=SW href="#317">w_offset</a>==28'h4000 || <a  onClick="return qs(event,this,96)"  class=SW href="#317">w_offset</a>==28'h4004) &amp;&amp; (<a  onClick="return qs(event,this,3)"  class=SI href="#15">w_hart_id</a> == 0))) ||
                           ((<a  onClick="return qs(event,this,94)"  class=SW href="#315">w_dev</a> == <span class=D>`</span><a  onClick="return qs(event,this,0)"  class=D href="define.vh.html#216">CLINT_BASE_TADDR</a>) &amp;&amp; <a  onClick="return qs(event,this,11)"  class=SI href="#23">w_proc_data_we</a> &amp;&amp; 
                           ((<a  onClick="return qs(event,this,96)"  class=SW href="#317">w_offset</a>==28'h4008 || <a  onClick="return qs(event,this,96)"  class=SW href="#317">w_offset</a>==28'h400c) &amp;&amp; (<a  onClick="return qs(event,this,3)"  class=SI href="#15">w_hart_id</a> == 1)));

<span class=P>    `ifdef laur0
</span><span class=P>    always @(posedge CLK)
</span><span class=P>        if(w_dev == `CLINT_BASE_TADDR &amp;&amp; w_offset[27:4]==24'h400) begin
</span><span class=P>            $display(</span><span class=P>&quot;core%1x w_data_wdata=%x sets wmtimecmp=%0d w_offset=%x w_proc_data_we=%x w_iswrite=%x, w_clint_we%x w_use_tlb=%1x w_proc_busy=%x r_pw_state=%x&quot;</span><span class=P>, 
</span><span class=P>                w_hart_id, w_data_wdata, w_wmtimecmp, w_offset, w_proc_data_we, w_iswrite, w_clint_we, w_use_tlb, w_proc_busy, r_pw_state);
</span><span class=P>        end
</span>    <span class=M>`endif</span>
<span class=K>endmodule</span>
<span class=C>/**************************************************************************************************/</span>
<span class=C>/*** Simple Direct Mapped Cache for TLB                                                         ***/</span>
<span class=C>/**************************************************************************************************/</span>
<a name="m_tlb"></a><a name="383"></a><a  href="mmu.v.html#m_mmu_TLB_inst_r"><img alt="[Up: m_mmu TLB_inst_r]" align=bottom border=0 src="v2html-up.gif"></a><a  href="mmu.v.html#m_mmu_TLB_data_r"><img alt="[Up: m_mmu TLB_data_r]" align=bottom border=0 src="v2html-up.gif"></a><a  href="mmu.v.html#m_mmu_TLB_data_w"><img alt="[Up: m_mmu TLB_data_w]" align=bottom border=0 src="v2html-up.gif"></a>
<span class=K>module</span> <span class=MM>m_tlb</span><a  href="hierarchy-m.html#m_tlb"><img align=top border=0 alt="Index" src="v2html-i.gif"></a>#(<span class=K>parameter</span> <a  onClick="return qs(event,this,0)"  class=PA href="#383">ADDR_WIDTH</a> = 20, <a  onClick="return qs(event,this,0)"  class=PA href="#383">D_WIDTH</a> = 20, <a  onClick="return qs(event,this,0)"  class=PA href="#383">ENTRY</a> = 4)
            (<a  onClick="return qs(event,this,97)"  class=SI href="#385">CLK</a>, <a  onClick="return qs(event,this,98)"  class=SI href="#385">RST_X</a>, <a  onClick="return qs(event,this,99)"  class=SI href="#386">w_flush</a>, <a  onClick="return qs(event,this,100)"  class=SI href="#386">w_we</a>, <a  onClick="return qs(event,this,101)"  class=SI href="#387">w_waddr</a>, <a  onClick="return qs(event,this,102)"  class=SI href="#387">w_raddr</a>, <a  onClick="return qs(event,this,103)"  class=SI href="#388">w_idata</a>, <a  onClick="return qs(event,this,104)"  class=SO href="#404">w_odata</a>, <a  onClick="return qs(event,this,105)"  class=SO href="#405">w_oe</a>);
<a name="385"></a>    <span class=K>input</span>  <span class=K>wire</span>                     <a  onClick="return qs(event,this,97)"  class=SI href="#277">CLK</a>, <a  onClick="return qs(event,this,98)"  class=SI href="#385">RST_X</a>;
<a name="386"></a>    <span class=K>input</span>  <span class=K>wire</span>                     <a  onClick="return qs(event,this,99)"  class=SI href="#277">w_flush</a>, <a  onClick="return qs(event,this,100)"  class=SI href="#281">w_we</a>;
<a name="387"></a>    <span class=K>input</span>  <span class=K>wire</span> [<a  onClick="return qs(event,this,0)"  class=PA href="#383">ADDR_WIDTH</a>-1:0]    <a  onClick="return qs(event,this,101)"  class=SI href="#282">w_waddr</a>, <a  onClick="return qs(event,this,102)"  class=SI href="#282">w_raddr</a>;
<a name="388"></a>    <span class=K>input</span>  <span class=K>wire</span>    [<a  onClick="return qs(event,this,0)"  class=PA href="#383">D_WIDTH</a>-1:0]    <a  onClick="return qs(event,this,103)"  class=SI href="#278">w_idata</a>;
<a name="389"></a>    <span class=K>output</span> <span class=K>wire</span>    [<a  onClick="return qs(event,this,0)"  class=PA href="#383">D_WIDTH</a>-1:0]    <a  onClick="return qs(event,this,104)"  class=SO href="#404">w_odata</a>;
<a name="390"></a>    <span class=K>output</span> <span class=K>wire</span>                     <a  onClick="return qs(event,this,105)"  class=SO href="#405">w_oe</a>;             <span class=C>//output enable
</span>
<a name="392"></a>    <span class=K>reg</span>                               [<a  onClick="return qs(event,this,0)"  class=PA href="#383">ENTRY</a>-1:0]   <a  onClick="return qs(event,this,106)"  class=SR href="#415">r_valid</a> = 0;
<a name="393"></a>    <span class=K>reg</span>  [(<a  onClick="return qs(event,this,0)"  class=PA href="#383">ADDR_WIDTH</a>-<span class=ST>$clog2</span>(<a  onClick="return qs(event,this,0)"  class=PA href="#383">ENTRY</a>)+<a  onClick="return qs(event,this,0)"  class=PA href="#383">D_WIDTH</a>)-1:0]   <a  onClick="return qs(event,this,107)"  class=SR href="#395">mem</a> [0:<a  onClick="return qs(event,this,0)"  class=PA href="#383">ENTRY</a>-1];
<a name="394"></a>    <span class=K>integer</span> <a  onClick="return qs(event,this,108)"  class=SIT href="#394">i</a>;
<a name="395"></a>    <span class=K>initial</span> <span class=K>for</span>(<a  onClick="return qs(event,this,108)"  class=SIT href="#394">i</a>=0; <a  onClick="return qs(event,this,108)"  class=SIT href="#394">i</a>&lt;<a  onClick="return qs(event,this,0)"  class=PA href="#383">ENTRY</a>; <a  onClick="return qs(event,this,108)"  class=SIT href="#394">i</a>=<a  onClick="return qs(event,this,108)"  class=SIT href="#394">i</a>+1) <a  onClick="return qs(event,this,107)"  class=SR href="#395">mem</a>[<a  onClick="return qs(event,this,108)"  class=SIT href="#394">i</a>] = 0;

    <span class=C>// READ
</span><a name="398"></a>    <span class=K>wire</span>              [<span class=ST>$clog2</span>(<a  onClick="return qs(event,this,0)"  class=PA href="#383">ENTRY</a>)-1:0]   <a  onClick="return qs(event,this,109)"  class=SW href="#400">w_ridx</a>;
<a name="399"></a>    <span class=K>wire</span> [(<a  onClick="return qs(event,this,0)"  class=PA href="#383">ADDR_WIDTH</a>-<span class=ST>$clog2</span>(<a  onClick="return qs(event,this,0)"  class=PA href="#383">ENTRY</a>))-1:0]   <a  onClick="return qs(event,this,110)"  class=SW href="#400">w_rtag</a>;
<a name="400"></a>    <span class=K>assign</span> {<a  onClick="return qs(event,this,110)"  class=SW href="#399">w_rtag</a>, <a  onClick="return qs(event,this,109)"  class=SW href="#398">w_ridx</a>} = <a  onClick="return qs(event,this,102)"  class=SI href="#387">w_raddr</a>;

<a name="402"></a>    <span class=K>wire</span> <a  onClick="return qs(event,this,111)"  class=SW href="#402">w_tagmatch</a> = (<a  onClick="return qs(event,this,107)"  class=SR href="#395">mem</a>[<a  onClick="return qs(event,this,109)"  class=SW href="#400">w_ridx</a>][(<a  onClick="return qs(event,this,0)"  class=PA href="#383">ADDR_WIDTH</a>-<span class=ST>$clog2</span>(<a  onClick="return qs(event,this,0)"  class=PA href="#383">ENTRY</a>)+<a  onClick="return qs(event,this,0)"  class=PA href="#383">D_WIDTH</a>)-1:<a  onClick="return qs(event,this,0)"  class=PA href="#383">D_WIDTH</a>] == <a  onClick="return qs(event,this,110)"  class=SW href="#400">w_rtag</a>);

<a name="404"></a>    <span class=K>assign</span> <a  onClick="return qs(event,this,104)"  class=SO href="#389">w_odata</a>  = <a  onClick="return qs(event,this,107)"  class=SR href="#395">mem</a>[<a  onClick="return qs(event,this,109)"  class=SW href="#400">w_ridx</a>][<a  onClick="return qs(event,this,0)"  class=PA href="#383">D_WIDTH</a>-1:0];
<a name="405"></a>    <span class=K>assign</span> <a  onClick="return qs(event,this,105)"  class=SO href="#390">w_oe</a>     = (<a  onClick="return qs(event,this,111)"  class=SW href="#402">w_tagmatch</a> &amp;&amp; <a  onClick="return qs(event,this,106)"  class=SR href="#415">r_valid</a>[<a  onClick="return qs(event,this,109)"  class=SW href="#400">w_ridx</a>]);

    <span class=C>// WRITE
</span><a name="408"></a>    <span class=K>wire</span>              [<span class=ST>$clog2</span>(<a  onClick="return qs(event,this,0)"  class=PA href="#383">ENTRY</a>)-1:0]   <a  onClick="return qs(event,this,112)"  class=SW href="#410">w_widx</a>;
<a name="409"></a>    <span class=K>wire</span> [(<a  onClick="return qs(event,this,0)"  class=PA href="#383">ADDR_WIDTH</a>-<span class=ST>$clog2</span>(<a  onClick="return qs(event,this,0)"  class=PA href="#383">ENTRY</a>))-1:0]   <a  onClick="return qs(event,this,113)"  class=SW href="#410">w_wtag</a>;
<a name="410"></a>    <span class=K>assign</span> {<a  onClick="return qs(event,this,113)"  class=SW href="#409">w_wtag</a>, <a  onClick="return qs(event,this,112)"  class=SW href="#408">w_widx</a>} = <a  onClick="return qs(event,this,101)"  class=SI href="#387">w_waddr</a>;

    <span class=K>always</span>  @(<span class=K>posedge</span>  <a  onClick="return qs(event,this,97)"  class=SI href="#385">CLK</a>)  <span class=K>begin</span>
        <span class=C>// FLUSH
</span>        <span class=K>if</span> (!<a  onClick="return qs(event,this,98)"  class=SI href="#385">RST_X</a> || <a  onClick="return qs(event,this,99)"  class=SI href="#386">w_flush</a>) <span class=K>begin</span>
<a name="415"></a>            <a  onClick="return qs(event,this,106)"  class=SR href="#392">r_valid</a> &lt;= 0;
        <span class=K>end</span>
        <span class=K>if</span> (<a  onClick="return qs(event,this,100)"  class=SI href="#386">w_we</a>) <span class=K>begin</span>
            <a  onClick="return qs(event,this,107)"  class=SR href="#393">mem</a>[<a  onClick="return qs(event,this,112)"  class=SW href="#408">w_widx</a>] &lt;= {<a  onClick="return qs(event,this,113)"  class=SW href="#410">w_wtag</a>, <a  onClick="return qs(event,this,103)"  class=SI href="#388">w_idata</a>};
            <a  onClick="return qs(event,this,106)"  class=SR href="#392">r_valid</a>[<a  onClick="return qs(event,this,112)"  class=SW href="#408">w_widx</a>] &lt;= 1;
        <span class=K>end</span>
    <span class=K>end</span>
<span class=K>endmodule</span> <span class=C>// m_tlb
</span>
<span class=C>/**************************************************************************************************/</span>

</pre>
<center><table class=NB cols=7 ><tr><td align="center" width="14%" onmousedown="this.style.border='inset';" onmouseup="this.style.border='outset';"  onclick="location='hierarchy.html';"><a target="_top" href="hierarchy.html">Hierarchy</a></td><td align="center" width="14%" onmousedown="this.style.border='inset';" onmouseup="this.style.border='outset';"  onclick="location='hierarchy-f.html';"><a target="_top" href="hierarchy-f.html">Files</a></td><td align="center" width="14%" onmousedown="this.style.border='inset';" onmouseup="this.style.border='outset';"  onclick="location='hierarchy-m.html';"><a target="_top" href="hierarchy-m.html">Modules</a></td><td align="center" width="14%" onmousedown="this.style.border='inset';" onmouseup="this.style.border='outset';"  onclick="location='hierarchy-s.html';"><a target="_top" href="hierarchy-s.html">Signals</a></td><td align="center" width="14%" onmousedown="this.style.border='inset';" onmouseup="this.style.border='outset';"  onclick="location='hierarchy-t.html';"><a target="_top" href="hierarchy-t.html">Tasks</a></td><td align="center" width="14%" onmousedown="this.style.border='inset';" onmouseup="this.style.border='outset';"  onclick="location='hierarchy-fn.html';"><a target="_top" href="hierarchy-fn.html">Functions</a></td><td align="center" width="14%" onmousedown="this.style.border='inset';" onmouseup="this.style.border='outset';"  onclick="location='http://www.burbleland.com/v2html/help_7_30.html?';"><a target="_top" href="http://www.burbleland.com/v2html/help_7_30.html?">Help</a></td></tr></table></center>
<script language="JavaScript"type="text/javascript"><!--
function next_page() { return ""; }
function first_page() { return ""; }
var extra_info = [
["S","mmu.v.html#14","","cpummu.v.html#69","","hierarchy-s.p2.html#CLK___m_mmu"],
["S","mmu.v.html#14","","cpummu.v.html#70","main.v.html#267","hierarchy-s.p7.html#RST_X___m_mmu"],
["S","mmu.v.html#15","","cpummu.v.html#71","cpummu.v.html#8","hierarchy-s.p9.html#w_hart_id___m_mmu"],
["S","mmu.v.html#16","","cpummu.v.html#72","busarbiter.v.html#40","hierarchy-s.p9.html#w_grant___m_mmu"],
["S","mmu.v.html#17","","cpummu.v.html#73","rvcorem.v.html#86","hierarchy-s.p9.html#w_pc___m_mmu"],
["S","mmu.v.html#18","","cpummu.v.html#74","rvcorem.v.html#131","hierarchy-s.p9.html#w_ir___m_mmu"],
["S","mmu.v.html#19","","cpummu.v.html#76","loader.v.html#78","hierarchy-s.p9.html#w_tx_ready___m_mmu"],
["S","mmu.v.html#20","","cpummu.v.html#78","rvcorem.v.html#216","hierarchy-s.p9.html#w_insn_addr___m_mmu"],
["S","mmu.v.html#21","","cpummu.v.html#79","rvcorem.v.html#401","hierarchy-s.p9.html#w_data_addr___m_mmu"],
["S","mmu.v.html#22","","cpummu.v.html#80","rvcorem.v.html#439","hierarchy-s.p9.html#w_data_wdata___m_mmu"],
["S","mmu.v.html#23","","cpummu.v.html#81","rvcorem.v.html#998","hierarchy-s.p9.html#w_proc_data_we___m_mmu"],
["S","mmu.v.html#24","mmu.v.html#345","","mmu.v.html#345","hierarchy-s.p9.html#w_data_we___m_mmu"],
["S","mmu.v.html#25","mmu.v.html#344","","mmu.v.html#344","hierarchy-s.p9.html#w_data_le___m_mmu"],
["S","mmu.v.html#26","","cpummu.v.html#84","busarbiter.v.html#175","hierarchy-s.p9.html#w_data_busy___m_mmu"],
["S","mmu.v.html#27","","cpummu.v.html#85","rvcorem.v.html#400","hierarchy-s.p9.html#w_data_ctrl___m_mmu"],
["S","mmu.v.html#28","mmu.v.html#331","","mmu.v.html#331","hierarchy-s.p9.html#w_insn_data___m_mmu"],
["S","mmu.v.html#29","","cpummu.v.html#87","rvcorem.v.html#999","hierarchy-s.p9.html#w_priv___m_mmu"],
["S","mmu.v.html#29","","cpummu.v.html#88","rvcorem.v.html#1000","hierarchy-s.p9.html#w_satp___m_mmu"],
["S","mmu.v.html#29","","cpummu.v.html#89","rvcorem.v.p2.html#1001","hierarchy-s.p9.html#w_mstatus___m_mmu"],
["S","mmu.v.html#30","mmu.v.html#136","","mmu.v.html#136","hierarchy-s.p9.html#w_pagefault___m_mmu"],
["S","mmu.v.html#31","","cpummu.v.html#91","rvcorem.v.html#997","hierarchy-s.p9.html#w_tlb_req___m_mmu"],
["S","mmu.v.html#32","","cpummu.v.html#92","rvcorem.v.html#914","hierarchy-s.p9.html#w_tlb_flush___m_mmu"],
["S","mmu.v.html#33","mmu.v.html#355","","mmu.v.html#355","hierarchy-s.p9.html#w_proc_busy___m_mmu"],
["S","mmu.v.html#35","","cpummu.v.html#95","rvcorem.v.p2.html#1003","hierarchy-s.p9.html#w_mtimecmp___m_mmu"],
["S","mmu.v.html#36","mmu.v.html#358","","mmu.v.html#358","hierarchy-s.p9.html#w_wmtimecmp___m_mmu"],
["S","mmu.v.html#37","mmu.v.html#367","","mmu.v.html#367","hierarchy-s.p9.html#w_clint_we___m_mmu"],
["S","mmu.v.html#39","mmu.v.html#304","","mmu.v.html#304","hierarchy-s.p9.html#w_mem_paddr___m_mmu"],
["S","mmu.v.html#40","mmu.v.html#348","","mmu.v.html#348","hierarchy-s.p9.html#w_tlb_busy___m_mmu"],
["S","mmu.v.html#41","mmu.v.html#324","","mmu.v.html#324","hierarchy-s.p9.html#w_dram_addr___m_mmu"],
["S","mmu.v.html#42","mmu.v.html#319","","mmu.v.html#319","hierarchy-s.p9.html#w_dram_wdata___m_mmu"],
["S","mmu.v.html#43","","cpummu.v.html#103","busarbiter.v.html#321","hierarchy-s.p9.html#w_dram_odata___m_mmu"],
["S","mmu.v.html#44","mmu.v.html#352","","mmu.v.html#352","hierarchy-s.p9.html#w_dram_we_t___m_mmu"],
["S","mmu.v.html#45","","cpummu.v.html#105","busarbiter.v.html#174","hierarchy-s.p9.html#w_dram_busy___m_mmu"],
["S","mmu.v.html#46","mmu.v.html#329","","mmu.v.html#329","hierarchy-s.p9.html#w_dram_ctrl___m_mmu"],
["S","mmu.v.html#47","mmu.v.html#335","","mmu.v.html#335","hierarchy-s.p9.html#w_dram_le___m_mmu"],
["S","mmu.v.html#51","mmu.v.html#202","","mmu.v.html#202","hierarchy-s.p6.html#physical_addr___m_mmu"],
["S","mmu.v.html#52","mmu.v.html#203","","mmu.v.html#203","hierarchy-s.p6.html#page_walk_fail___m_mmu"],
["S","mmu.v.html#55","mmu.v.html#157","","mmu.v.html#157","hierarchy-s.p7.html#r_pw_state___m_mmu"],
["S","mmu.v.html#58","mmu.v.html#175","","mmu.v.html#175","hierarchy-s.p5.html#L1_pte___m_mmu"],
["S","mmu.v.html#59","mmu.v.html#193","","mmu.v.html#193","hierarchy-s.p5.html#L0_pte___m_mmu"],
["S","mmu.v.html#62","","","","hierarchy-s.p7.html#r_mc_mode___m_mmu"],
["S","mmu.v.html#66","","","","hierarchy-s.p9.html#w_mc_addr___m_mmu"],
["S","mmu.v.html#67","","","","hierarchy-s.p9.html#w_mc_wdata___m_mmu"],
["S","mmu.v.html#68","","","","hierarchy-s.p9.html#w_mc_we___m_mmu"],
["S","mmu.v.html#69","","","","hierarchy-s.p9.html#w_mc_ctrl___m_mmu"],
["S","mmu.v.html#70","","","","hierarchy-s.p9.html#w_mc_aces___m_mmu"],
["S","mmu.v.html#72","mmu.v.html#72","","mmu.v.html#72","hierarchy-s.p9.html#w_mem_wdata___m_mmu"],
["S","mmu.v.html#76","mmu.v.html#76","","mmu.v.html#76","hierarchy-s.p9.html#w_iscode___m_mmu"],
["S","mmu.v.html#77","mmu.v.html#77","","mmu.v.html#77","hierarchy-s.p9.html#w_isread___m_mmu"],
["S","mmu.v.html#78","mmu.v.html#78","","mmu.v.html#78","hierarchy-s.p9.html#w_iswrite___m_mmu"],
["S","mmu.v.html#79","mmu.v.html#79","","mmu.v.html#79","hierarchy-s.p9.html#v_addr___m_mmu"],
["S","mmu.v.html#104","mmu.v.html#104","","mmu.v.html#104","hierarchy-s.p9.html#vpn1___m_mmu"],
["S","mmu.v.html#105","mmu.v.html#105","","mmu.v.html#105","hierarchy-s.p5.html#L1_pte_addr___m_mmu"],
["S","mmu.v.html#106","mmu.v.html#106","","mmu.v.html#106","hierarchy-s.p5.html#L1_xwr___m_mmu"],
["S","mmu.v.html#107","mmu.v.html#107","","mmu.v.html#107","hierarchy-s.p5.html#L1_paddr___m_mmu"],
["S","mmu.v.html#108","mmu.v.html#108","","mmu.v.html#108","hierarchy-s.p5.html#L1_p_addr___m_mmu"],
["S","mmu.v.html#109","mmu.v.html#109","","mmu.v.html#109","hierarchy-s.p5.html#L1_write___m_mmu"],
["S","mmu.v.html#110","mmu.v.html#110","","mmu.v.html#110","hierarchy-s.p5.html#L1_success___m_mmu"],
["S","mmu.v.html#116","mmu.v.html#116","","mmu.v.html#116","hierarchy-s.p9.html#vpn0___m_mmu"],
["S","mmu.v.html#117","mmu.v.html#117","","mmu.v.html#117","hierarchy-s.p5.html#L0_pte_addr___m_mmu"],
["S","mmu.v.html#118","mmu.v.html#118","","mmu.v.html#118","hierarchy-s.p5.html#L0_xwr___m_mmu"],
["S","mmu.v.html#119","mmu.v.html#119","","mmu.v.html#119","hierarchy-s.p5.html#L0_paddr___m_mmu"],
["S","mmu.v.html#120","mmu.v.html#120","","mmu.v.html#120","hierarchy-s.p5.html#L0_p_addr___m_mmu"],
["S","mmu.v.html#121","mmu.v.html#121","","mmu.v.html#121","hierarchy-s.p5.html#L0_write___m_mmu"],
["S","mmu.v.html#122","mmu.v.html#122","","mmu.v.html#122","hierarchy-s.p5.html#L0_success___m_mmu"],
["S","mmu.v.html#128","mmu.v.html#128","","mmu.v.html#128","hierarchy-s.p5.html#L1_pte_write___m_mmu"],
["S","mmu.v.html#129","mmu.v.html#129","","mmu.v.html#129","hierarchy-s.p5.html#L0_pte_write___m_mmu"],
["S","mmu.v.html#130","mmu.v.html#130","","mmu.v.html#130","hierarchy-s.p9.html#w_pte_we___m_mmu"],
["S","mmu.v.html#133","mmu.v.html#133","","mmu.v.html#133","hierarchy-s.p9.html#w_pte_waddr___m_mmu"],
["S","mmu.v.html#134","mmu.v.html#134","","mmu.v.html#134","hierarchy-s.p9.html#w_pte_wdata___m_mmu"],
["S","mmu.v.html#139","mmu.v.html#163","","mmu.v.html#163","hierarchy-s.p7.html#r_tlb_addr___m_mmu"],
["S","mmu.v.html#140","mmu.v.html#168","","mmu.v.html#168","hierarchy-s.p7.html#r_tlb_use___m_mmu"],
["S","mmu.v.html#141","mmu.v.html#279","","mmu.v.html#404","hierarchy-s.p9.html#w_tlb_inst_r_addr___m_mmu"],
["S","mmu.v.html#141","mmu.v.html#283","","mmu.v.html#404","hierarchy-s.p9.html#w_tlb_data_r_addr___m_mmu"],
["S","mmu.v.html#141","mmu.v.html#287","","mmu.v.html#404","hierarchy-s.p9.html#w_tlb_data_w_addr___m_mmu"],
["S","mmu.v.html#142","mmu.v.html#279","","mmu.v.html#405","hierarchy-s.p9.html#w_tlb_inst_r_oe___m_mmu"],
["S","mmu.v.html#142","mmu.v.html#283","","mmu.v.html#405","hierarchy-s.p9.html#w_tlb_data_r_oe___m_mmu"],
["S","mmu.v.html#142","mmu.v.html#287","","mmu.v.html#405","hierarchy-s.p9.html#w_tlb_data_w_oe___m_mmu"],
["S","mmu.v.html#143","mmu.v.html#143","","mmu.v.html#143","hierarchy-s.p9.html#w_use_tlb___m_mmu"],
["S","mmu.v.html#145","mmu.v.html#145","","mmu.v.html#145","hierarchy-s.p9.html#w_tlb_hit___m_mmu"],
["S","mmu.v.html#149","mmu.v.html#158","","mmu.v.html#158","hierarchy-s.p7.html#r_dram_was_busy___m_mmu"],
["S","mmu.v.html#149","mmu.v.html#248","","mmu.v.html#248","hierarchy-s.p7.html#r_dram_took_cmd___m_mmu"],
["S","mmu.v.html#149","mmu.v.html#254","","mmu.v.html#254","hierarchy-s.p7.html#r_data_was_busy___m_mmu"],
["S","mmu.v.html#333","mmu.v.html#333","","mmu.v.html#333","hierarchy-s.p9.html#w_dram_aces___m_mmu"],
["S","mmu.v.html#321","mmu.v.html#321","","mmu.v.html#321","hierarchy-s.p9.html#w_dram_we___m_mmu"],
["S","mmu.v.html#272","mmu.v.html#272","","mmu.v.html#272","hierarchy-s.p9.html#w_tlb_inst_r_we___m_mmu"],
["S","mmu.v.html#273","mmu.v.html#273","","mmu.v.html#273","hierarchy-s.p9.html#w_tlb_data_r_we___m_mmu"],
["S","mmu.v.html#274","mmu.v.html#274","","mmu.v.html#274","hierarchy-s.p9.html#w_tlb_data_w_we___m_mmu"],
["S","mmu.v.html#275","mmu.v.html#275","","mmu.v.html#275","hierarchy-s.p9.html#w_tlb_wdata___m_mmu"],
["S","mmu.v.html#290","mmu.v.html#294","","mmu.v.html#294","hierarchy-s.p7.html#r_tlb_pte_addr___m_mmu"],
["S","mmu.v.html#291","mmu.v.html#294","","mmu.v.html#294","hierarchy-s.p7.html#r_tlb_acs___m_mmu"],
["S","mmu.v.html#301","mmu.v.html#301","","mmu.v.html#301","hierarchy-s.p9.html#w_insn_paddr___m_mmu"],
["S","mmu.v.html#307","mmu.v.html#307","","mmu.v.html#307","hierarchy-s.p9.html#w_mem_ctrl___m_mmu"],
["S","mmu.v.html#315","mmu.v.html#315","","mmu.v.html#315","hierarchy-s.p9.html#w_dev___m_mmu"],
["S","mmu.v.html#316","mmu.v.html#316","","mmu.v.html#316","hierarchy-s.p9.html#w_virt___m_mmu"],
["S","mmu.v.html#317","mmu.v.html#317","","mmu.v.html#317","hierarchy-s.p9.html#w_offset___m_mmu"],
["S","mmu.v.html#385","","mmu.v.html#277","","hierarchy-s.p2.html#CLK___m_tlb"],
["S","mmu.v.html#385","","","mmu.v.html#385","hierarchy-s.p7.html#RST_X___m_tlb"],
["S","mmu.v.html#386","","mmu.v.html#277","rvcorem.v.html#914","hierarchy-s.p9.html#w_flush___m_tlb"],
["S","mmu.v.html#386","","mmu.v.html#281","mmu.v.html#272","hierarchy-s.p9.html#w_we___m_tlb"],
["S","mmu.v.html#387","","mmu.v.html#282","rvcorem.v.html#216","hierarchy-s.p9.html#w_waddr___m_tlb"],
["S","mmu.v.html#387","","mmu.v.html#282","rvcorem.v.html#216","hierarchy-s.p9.html#w_raddr___m_tlb"],
["S","mmu.v.html#388","","mmu.v.html#278","mmu.v.html#275","hierarchy-s.p9.html#w_idata___m_tlb"],
["S","mmu.v.html#389","mmu.v.html#404","","mmu.v.html#404","hierarchy-s.p9.html#w_odata___m_tlb"],
["S","mmu.v.html#390","mmu.v.html#405","","mmu.v.html#405","hierarchy-s.p9.html#w_oe___m_tlb"],
["S","mmu.v.html#392","mmu.v.html#415","","mmu.v.html#415","hierarchy-s.p7.html#r_valid___m_tlb"],
["S","mmu.v.html#393","mmu.v.html#395","","mmu.v.html#395","hierarchy-s.p5.html#mem___m_tlb"],
["S","mmu.v.html#394","","","","hierarchy-s.p4.html#i___m_tlb"],
["S","mmu.v.html#398","mmu.v.html#400","","mmu.v.html#400","hierarchy-s.p9.html#w_ridx___m_tlb"],
["S","mmu.v.html#399","mmu.v.html#400","","mmu.v.html#400","hierarchy-s.p9.html#w_rtag___m_tlb"],
["S","mmu.v.html#402","mmu.v.html#402","","mmu.v.html#402","hierarchy-s.p9.html#w_tagmatch___m_tlb"],
["S","mmu.v.html#408","mmu.v.html#410","","mmu.v.html#410","hierarchy-s.p9.html#w_widx___m_tlb"],
["S","mmu.v.html#409","mmu.v.html#410","","mmu.v.html#410","hierarchy-s.p9.html#w_wtag___m_tlb"]
];
disabled=0;
// -->
</script>
<hr>
<table>
 <tr><td><i>This page:</i></td>
  <td><i>Created:</i></td><td><i>Mon May 27 16:23:36 2024</i></td></tr>
<tr>
 <td> </td>
 <td><i>From:</i></td><td><i>
../src/mmu.v</i></td></tr>
</table>
<hr>
<table width="100%"><tr><td><i>Verilog converted to html by  <a target="_top" href="http://www.burbleland.com/v2html/v2html.html">  v2html 7.30.1.3</a> 
 (written by <a href="mailto:v2html730@burbleland.com">Costas Calamvokis</a>).</i></td><td align="right"><b><a href="http://www.burbleland.com/v2html/help_7_30.html?">Help</a></b></td></tr></table><table height="90%"><tr><td></td></tr></table>
</body>
</html>
